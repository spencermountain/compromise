{"version":3,"file":"compromise-pronounce.js","sources":["../src/transformations.js","../src/metaphone.js","../src/index.js"],"sourcesContent":["//individual manipulations of the text\nconst transformations = {\n  dedup: (s) => {\n    return s.replace(/([^c])\\1/g, '$1')\n  },\n  dropInitialLetters: (s) => {\n    if (s.match(/^(kn|gn|pn|ae|wr)/)) {\n      return s.substr(1, s.length - 1)\n    }\n    return s\n  },\n  dropBafterMAtEnd: (s) => {\n    return s.replace(/mb$/, 'm')\n  },\n  cchange: (s) => {\n    s = s.replace(/([^s]|^)(c)(h)/g, '$1x$3').trim()\n    s = s.replace(/cia/g, 'xia')\n    s = s.replace(/c(i|e|y)/g, 's$1')\n    return s.replace(/c/g, 'k')\n  },\n  dchange: (s) => {\n    s = s.replace(/d(ge|gy|gi)/g, 'j$1')\n    return s.replace(/d/g, 't')\n  },\n  dropG: (s) => {\n    s = s.replace(/gh(^$|[^aeiou])/g, 'h$1')\n    return s.replace(/g(n|ned)$/g, '$1')\n  },\n  changeG: (s) => {\n    s = s.replace(/gh/g, 'f')\n    s = s.replace(/([^g]|^)(g)(i|e|y)/g, '$1j$3')\n    s = s.replace(/gg/g, 'g')\n    return s.replace(/g/g, 'k')\n  },\n  dropH: (s) => {\n    return s.replace(/([aeiou])h([^aeiou]|$)/g, '$1$2')\n  },\n  changeCK: (s) => {\n    return s.replace(/ck/g, 'k')\n  },\n  changePH: (s) => {\n    return s.replace(/ph/g, 'f')\n  },\n  changeQ: (s) => {\n    return s.replace(/q/g, 'k')\n  },\n  changeS: (s) => {\n    return s.replace(/s(h|io|ia)/g, 'x$1')\n  },\n  changeT: (s) => {\n    s = s.replace(/t(ia[^n]|io)/g, 'x$1')\n    // return s.replace(/th/, '0')\n    return s\n  },\n  dropT: (s) => {\n    return s.replace(/tch/g, 'ch')\n  },\n  changeV: (s) => {\n    return s.replace(/v/g, 'f')\n  },\n  changeWH: (s) => {\n    return s.replace(/^wh/, 'w')\n  },\n  dropW: (s) => {\n    return s.replace(/w([^aeiou]|$)/g, '$1')\n  },\n  changeX: (s) => {\n    s = s.replace(/^x/, 's')\n    return s.replace(/x/g, 'ks')\n  },\n  dropY: (s) => {\n    return s.replace(/y([^aeiou]|$)/g, '$1')\n  },\n  changeZ: (s) => {\n    return s.replace(/z/, 's')\n  },\n  dropVowels: (s) => {\n    return s //.charAt(0) + s.substr(1, s.length).replace(/[aeiou]/g, '');\n  },\n}\nmodule.exports = transformations\n","//a js version of the metaphone (#1) algorithm\n//adapted from the work of Chris Umbel\n// https://github.com/NaturalNode/natural/blob/master/lib/natural/phonetics/metaphone.js\n\nconst fns = require('./transformations.js')\n\nconst metaphone = function (s) {\n  s = fns.dedup(s)\n  s = fns.dropInitialLetters(s)\n  s = fns.dropBafterMAtEnd(s)\n  s = fns.changeCK(s)\n  s = fns.cchange(s)\n  s = fns.dchange(s)\n  s = fns.dropG(s)\n  s = fns.changeG(s)\n  s = fns.dropH(s)\n  s = fns.changePH(s)\n  s = fns.changeQ(s)\n  s = fns.changeS(s)\n  s = fns.changeX(s)\n  s = fns.changeT(s)\n  s = fns.dropT(s)\n  s = fns.changeV(s)\n  s = fns.changeWH(s)\n  s = fns.dropW(s)\n  s = fns.dropY(s)\n  s = fns.changeZ(s)\n  s = fns.dropVowels(s)\n  return s.trim()\n}\n\nmodule.exports = metaphone\n","const metaphone = require('./metaphone')\n\n/** adds .numbers() method */\nconst plugin = function (Doc) {\n  Doc.prototype.pronounce = function (opts = {}) {\n    opts.normal = true\n    let json = this.json(opts)\n    json.forEach((obj) => {\n      obj.pronounce = metaphone(obj.normal)\n    })\n    return json\n  }\n}\n\nmodule.exports = plugin\n"],"names":["transformations","dedup","s","replace","dropInitialLetters","match","substr","length","dropBafterMAtEnd","cchange","trim","dchange","dropG","changeG","dropH","changeCK","changePH","changeQ","changeS","changeT","dropT","changeV","changeWH","dropW","changeX","dropY","changeZ","dropVowels","metaphone","fns","plugin","Doc","prototype","pronounce","opts","normal","json","forEach","obj"],"mappings":"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"}