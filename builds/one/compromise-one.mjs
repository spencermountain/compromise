var t={methods:{one:{},two:{},three:{},four:{}},model:{one:{},two:{},three:{}},compute:{},hooks:[]};var e={compute:function(t){const{world:e}=this,n=e.compute;return"string"==typeof t&&n.hasOwnProperty(t)?n[t](this):(t=>"[object Array]"===Object.prototype.toString.call(t))(t)?t.forEach(t=>e.compute.hasOwnProperty(t)&&n[t](this)):"function"==typeof t?t(this):console.warn("no compute:",t),this}};var n={forEach:function(t){return this.fullPointer.forEach((e,n)=>{let r=this.update([e]);t(r,n)}),this},map:function(t,e){let n=this.fullPointer.map((e,n)=>{let r=this.update([e]);return t(r,n)});if(0===n.length)return e||this.update([]);if(void 0!==n[0]){if("string"==typeof n[0])return n;if("object"==typeof n[0]&&(null===n[0]||!n[0].isView))return n}let r=[];return n.forEach(t=>{r=r.concat(t.fullPointer)}),this.toView(r)},filter:function(t){let e=this.fullPointer;return e=e.filter((e,n)=>{let r=this.update([e]);return t(r,n)}),this.update(e)},find:function(t){let e=this.fullPointer.find((e,n)=>{let r=this.update([e]);return t(r,n)});return this.update([e])},some:function(t){return this.fullPointer.some((e,n)=>{let r=this.update([e]);return t(r,n)})},random:function(t=1){let e=this.fullPointer,n=Math.floor(Math.random()*e.length);return n+t>this.length&&(n=this.length-t,n=n<0?0:n),e=e.slice(n,n+t),this.update(e)}};const r={termList:function(){return this.methods.one.termList(this.docs)},terms:function(t){let e=[];this.docs.forEach(t=>{t.forEach(t=>{let[n,r]=t.index||[];e.push([n,r,r+1])})});let n=this.update(e);return"number"==typeof t?n.eq(t):n},groups:function(t){if(t||0===t)return this.update(this._groups[t]||[]);let e={};return Object.keys(this._groups).forEach(t=>{e[t]=this.update(this._groups[t])}),e},eq:function(t){let e=this.pointer;return e||(e=this.docs.map((t,e)=>[e])),e[t]?this.update([e[t]]):this.none()},first:function(){return this.eq(0)},last:function(){let t=this.fullPointer.length-1;return this.eq(t)},firstTerms:function(){return this.match("^.")},lastTerms:function(){return this.match(".$")},slice:function(t,e){let n=this.pointer||this.docs.map((t,e)=>[e]);return n=n.slice(t,e),this.update(n)},all:function(){return this.update().toView()},fullSentences:function(){let t=this.fullPointer.map(t=>[t[0]]);return this.update(t).toView()},none:function(){return this.update([])},isDoc:function(t){if(!t||!t.isView)return!1;let e=this.fullPointer,n=t.fullPointer;return!e.length!==n.length&&e.every((t,e)=>!!n[e]&&(t[0]===n[e][0]&&t[1]===n[e][1]&&t[2]===n[e][2]))},wordCount:function(){return this.docs.reduce((t,e)=>t+=e.filter(t=>""!==t.text).length,0)}};r.group=r.groups,r.fullSentence=r.fullSentences,r.sentence=r.fullSentences,r.lastTerm=r.lastTerms,r.firstTerm=r.firstTerms;var o=r;const i=Object.assign({},o,e,n);i.get=i.eq;var s=i;class View{constructor(e,n,r={}){[["document",e],["world",t],["_groups",r],["_cache",null],["viewType","View"]].forEach(t=>{Object.defineProperty(this,t[0],{value:t[1],writable:!0})}),this.ptrs=n}get docs(){let e=this.document;return this.ptrs&&(e=t.methods.one.getDoc(this.ptrs,this.document)),e}get pointer(){return this.ptrs}get methods(){return this.world.methods}get model(){return this.world.model}get hooks(){return this.world.hooks}get isView(){return!0}get found(){return this.docs.length>0}get length(){return this.docs.length}get fullPointer(){let{docs:t,ptrs:e,document:n}=this;return(e||t.map((t,e)=>[e])).map(t=>{let[e,r,o,i,s]=t;return r=r||0,o=o||(n[e]||[]).length,n[e]&&n[e][r]&&(i=i||n[e][r].id,n[e][o-1]&&(s=s||n[e][o-1].id)),[e,r,o,i,s]})}update(t){let e=new View(this.document,t);if(e._cache&&t&&t.length>1){let n=[];t.forEach(t=>{1===t.length&&n.push(e._cache[t[0]])}),e._cache=n}return e.world=this.world,e}toView(t){return void 0===t&&(t=this.pointer),new View(this.document,t)}fromText(t){const{methods:e}=this;let n=e.one.tokenize.fromString(t,this.world),r=new View(n);return r.world=this.world,r.compute(["normal","lexicon","preTagger"]),r}clone(){let t=this.document.slice(0);t=t.map(t=>t.map(t=>((t=Object.assign({},t)).tags=new Set(t.tags),t)));let e=this.update(this.pointer);return e.document=t,e._cache=this._cache,e}}Object.assign(View.prototype,s);var l=View;const a=function(t){return t&&"object"==typeof t&&!Array.isArray(t)};var c=function(t,e,n,r){const{methods:o,model:i,compute:s,hooks:l}=e;t.methods&&function(t,e){for(const n in e)t[n]=t[n]||{},Object.assign(t[n],e[n])}(o,t.methods),t.model&&function t(e,n){if(a(n))for(const r in n)a(n[r])?(e[r]||Object.assign(e,{[r]:{}}),t(e[r],n[r])):Object.assign(e,{[r]:n[r]});return e}(i,t.model),t.compute&&Object.assign(s,t.compute),l&&(e.hooks=l.concat(t.hooks||[])),t.api&&t.api(n),t.lib&&Object.keys(t.lib).forEach(e=>r[e]=t.lib[e]),t.tags&&r.addTags(t.tags),t.words&&r.addWords(t.words),t.mutate&&t.mutate(e)};const u=function(t){return"[object Array]"===Object.prototype.toString.call(t)};var h=function(t,e,n){const{methods:r}=n;let o=new e([]);if(o.world=n,"number"==typeof t&&(t=String(t)),!t)return o;if("string"==typeof t){return new e(r.one.tokenize.fromString(t,n))}if(i=t,"[object Object]"===Object.prototype.toString.call(i)&&t.isView)return new e(t.document,t.ptrs);var i;if(u(t)){if(u(t[0])){return new e(t.map(t=>t.map(t=>({text:t,normal:t,pre:"",post:" ",tags:new Set}))))}return new e(function(t){return t.map(t=>t.terms.map(t=>(u(t.tags)&&(t.tags=new Set(t.tags)),t)))}(t))}return o};let f=Object.assign({},t);const p=function(t,e){e&&p.addWords(e);let n=h(t,l,f);return t&&n.compute(f.hooks),n};Object.defineProperty(p,"_world",{value:f,writable:!0}),p.tokenize=function(t,e){const{compute:n}=this._world;e&&p.addWords(e);let r=h(t,l,f);return n.contractions&&r.compute(["alias","normal","machine","contractions"]),r},p.plugin=function(t){return c(t,this._world,l,this),this},p.extend=p.plugin,p.world=function(){return this._world},p.model=function(){return this._world.model},p.methods=function(){return this._world.methods},p.hooks=function(){return this._world.hooks},p.verbose=function(t){const e="undefined"!=typeof process&&process.env?process.env:self.env||{};return e.DEBUG_TAGS="tagger"===t||!0===t||"",e.DEBUG_MATCH="match"===t||!0===t||"",e.DEBUG_CHUNKS="chunker"===t||!0===t||"",this},p.version="14.2.0-rc1";var d=p;const m={cache:function(){return this._cache=this.methods.one.cacheDoc(this.document),this},uncache:function(){return this._cache=null,this}};var w={api:function(t){Object.assign(t.prototype,m)},compute:{cache:function(t){t._cache=t.methods.one.cacheDoc(t.document)}},methods:{one:{cacheDoc:function(t){return t.map(t=>{let e=new Set;return t.forEach(t=>{""!==t.normal&&e.add(t.normal),t.switch&&e.add(`%${t.switch}%`),t.implicit&&e.add(t.implicit),t.machine&&e.add(t.machine),t.alias&&t.alias.forEach(t=>e.add(t));let n=Array.from(t.tags);for(let t=0;t<n.length;t+=1)e.add("#"+n[t])}),e})}}}};const y=t=>/^\p{Lu}[\p{Ll}'â€™]/u.test(t)||/^\p{Lu}$/u.test(t),v=(t,e,n)=>{if(n.forEach(t=>t.dirty=!0),t){let r=[e,0].concat(n);Array.prototype.splice.apply(t,r)}return t},b=function(t){let e=t[t.length-1];!e||/ $/.test(e.post)||/[-â€“â€”]/.test(e.post)||(e.post+=" ")},x=(t,e,n)=>{const r=/[-.?!,;:)â€“â€”'"]/g;let o=t[e-1];if(!o)return;let i=o.post;if(r.test(i)){let t=i.match(r).join(""),e=n[n.length-1];e.post=t+e.post,o.post=o.post.replace(r,"")}},j=function(t,e,n,r){let[o,i,s]=e;0===i||s===r[o].length?b(n):(b(n),b([t[e[1]]])),function(t,e,n){let r=t[e];if(0!==e||!y(r.text))return;n[0].text=n[0].text.replace(/^\p{Ll}/u,t=>t.toUpperCase());let o=t[e];o.tags.has("ProperNoun")||o.tags.has("Acronym")||y(o.text)&&o.text.length>1&&(o.text=(i=o.text,i.replace(/^\p{Lu}/u,t=>t.toLowerCase())));var i}(t,i,n),v(t,i,n)},E=(new Date).getTime(),O=t=>(t=t.length<3?"0"+t:t).length<3?"0"+t:t;var k=function(t){let[e,n]=t.index||[0,0];var r=(new Date).getTime()-E;r=parseInt(r,10),e=e>46655?46655:e,n=n>1294?1294:n;let o=O((r=r>46655?46655:r).toString(36));o+=O(e.toString(36));let i=n.toString(36);return i=i.length<2?"0"+i:i,o+=i,o+=parseInt(36*Math.random(),10).toString(36),t.normal+"|"+o.toUpperCase()};const P=function(t){if(t.has("@hasContraction")){t.grow("@hasContraction").contractions().expand()}},_=t=>"[object Array]"===Object.prototype.toString.call(t),S=function(t,e,n){const{document:r,world:o}=e;let i=e.fullPointer,s=e.fullPointer;e.forEach((l,a)=>{let c=l.fullPointer[0],[u]=c,h=r[u],f=function(t,e){const{methods:n}=e;return"string"==typeof t?n.one.tokenize.fromString(t,e)[0]:"object"==typeof t&&t.isView?t.clone().docs[0]:_(t)?_(t[0])?t[0]:t:[]}(t,o);f=function(t){return t.map(t=>(t.id=k(t),t))}(f),n?(P(e.update([c]).firstTerm()),j(h,c,f,r)):(P(e.update([c]).lastTerm()),function(t,e,n,r){let[o,,i]=e,s=(r[o]||[]).length;i<s?(x(t,i,n),b(n)):s===i&&(b(t),x(t,i,n),r[o+1]&&(n[n.length-1].post+=" ")),v(t,e[2],n),e[4]=n[n.length-1].id}(h,c,f,r)),r[u]&&r[u][c[1]]&&(c[3]=r[u][c[1]].id),s[a]=c,c[2]+=f.length,i[a]=c});let l=e.toView(i);return e.ptrs=s,l.compute(["id","index","lexicon","preTagger"]),l},A={insertAfter:function(t){return S(t,this,!1)},insertBefore:function(t){return S(t,this,!0)}};A.append=A.insertAfter,A.prepend=A.insertBefore,A.insert=A.insertAfter;var $=A;const T=/\$[0-9a-z]+/g,C={};C.replaceWith=function(t,e={}){let n=this.fullPointer,r=this;if("function"==typeof t)return function(t,e){return t.forEach(t=>{let n=e(t);t.replaceWith(n)}),t}(r,t);t=function(t,e){if("string"!=typeof t)return t;let n=e.groups();return t.replace(T,t=>{let e=t.replace(/\$/,"");return n.hasOwnProperty(e)?n[e].text():t})}(t,r);let o=this.update(n);n=n.map(t=>t.slice(0,3));let i=(o.docs[0]||[]).map(t=>Array.from(t.tags));if(r.insertAfter(t),o.has("@hasContraction")&&r.contractions){r.grow("@hasContraction+").contractions().expand()}r.delete(o);let s=r.toView(n).compute(["index","lexicon","preTagger"]);return e.tags&&s.terms().forEach((t,e)=>{t.tagSafe(i[e])}),e.case&&s.docs[0]&&s.docs[0][0]&&0===s.docs[0][0].index[1]&&(s.docs[0][0].text=s.docs[0][0].text.replace(/\w\S*/g,t=>t.charAt(0).toUpperCase()+t.substring(1).toLowerCase())),s},C.replace=function(t,e,n){if(t&&!e)return this.replaceWith(t,n);let r=this.match(t);return r.found?r.replaceWith(e,n):this};var z=C;const N={remove:function(t){const{indexN:e}=this.methods.one.pointer;let n=this.all(),r=this;if(t&&(n=this,r=this.match(t)),n.has("@hasContraction")&&n.contractions){n.grow("@hasContraction").contractions().expand()}let o=n.fullPointer,i=r.fullPointer.reverse(),s=function(t,e){e.forEach(e=>{let[n,r,o]=e,i=o-r;t[n]&&(o===t[n].length&&o>1&&function(t,e){let n=t.length-1,r=t[n],o=t[n-e];o&&r&&(o.post+=r.post,o.post=o.post.replace(/ +([.?!,;:])/,"$1"),o.post=o.post.replace(/[,;:]+([.?!])/,"$1"))}(t[n],i),t[n].splice(r,i))});for(let e=t.length-1;e>=0;e-=1)if(0===t[e].length&&(t.splice(e,1),e===t.length&&t[e-1])){let n=t[e-1],r=n[n.length-1];r&&(r.post=r.post.trimEnd())}return t}(this.document,i),l=e(i);return o=o.map(t=>{let[e]=t;return l[e]?(l[e].forEach(e=>{let n=e[2]-e[1];t[1]<=e[1]&&t[2]>=e[2]&&(t[2]-=n)}),t):t}),o=o.filter((t,e)=>{if(t[2]-t[1]<=0){for(let t=e+1;t<o.length;t+=1)o.filter(e=>e[0]===t).forEach(t=>{t[0]-=1});return!1}return!0}),o=o.map(t=>(t[3]=null,t[4]=null,t)),n.ptrs=o,n.document=s,n.compute("index"),t?n.toView(o):n.none()}};N.delete=N.remove;var F=N;const L={pre:function(t,e){return void 0===t&&this.found?this.docs[0][0].pre:(this.docs.forEach(n=>{let r=n[0];!0===e?r.pre+=t:r.pre=t}),this)},post:function(t,e){if(void 0===t){let t=this.docs[this.docs.length-1];return t[t.length-1].post}return this.docs.forEach(n=>{let r=n[n.length-1];!0===e?r.post+=t:r.post=t}),this},trim:function(){if(!this.found)return this;let t=this.docs,e=t[0][0];e.pre=e.pre.trimStart();let n=t[t.length-1],r=n[n.length-1];return r.post=r.post.trimEnd(),this},hyphenate:function(){return this.docs.forEach(t=>{t.forEach((e,n)=>{0!==n&&(e.pre=""),t[n+1]&&(e.post="-")})}),this},dehyphenate:function(){const t=/[-â€“â€”]/;return this.docs.forEach(e=>{e.forEach(e=>{t.test(e.post)&&(e.post=" ")})}),this},toQuotations:function(t,e){return t=t||'"',e=e||'"',this.docs.forEach(n=>{n[0].pre=t+n[0].pre;let r=n[n.length-1];r.post=e+r.post}),this},toParentheses:function(t,e){return t=t||"(",e=e||")",this.docs.forEach(n=>{n[0].pre=t+n[0].pre;let r=n[n.length-1];r.post=e+r.post}),this}};L.deHyphenate=L.dehyphenate,L.toQuotation=L.toQuotations;var V=L;var q={alpha:(t,e)=>t.normal<e.normal?-1:t.normal>e.normal?1:0,length:(t,e)=>{let n=t.normal.trim().length,r=e.normal.trim().length;return n<r?1:n>r?-1:0},wordCount:(t,e)=>t.words<e.words?1:t.words>e.words?-1:0,sequential:(t,e)=>t[0]<e[0]?1:t[0]>e[0]?-1:t[1]>e[1]?1:-1,byFreq:function(t){let e={};return t.forEach(t=>{e[t.normal]=e[t.normal]||0,e[t.normal]+=1}),t.sort((t,n)=>{let r=e[t.normal],o=e[n.normal];return r<o?1:r>o?-1:0}),t}};const D=new Set(["index","sequence","seq","sequential","chron","chronological"]),G=new Set(["freq","frequency","topk","repeats"]),B=new Set(["alpha","alphabetical"]);var M={unique:function(){let t=new Set;return this.filter(e=>{let n=e.text("machine");return!t.has(n)&&(t.add(n),!0)})},reverse:function(){let t=this.pointer||this.docs.map((t,e)=>[e]);return t=[].concat(t),t=t.reverse(),this.update(t)},sort:function(t){let{docs:e,pointer:n}=this;if("function"==typeof t)return function(t,e){let n=t.fullPointer;return n=n.sort((n,r)=>(n=t.update([n]),r=t.update([r]),e(n,r))),t.ptrs=n,t}(this,t);t=t||"alpha";let r=n||e.map((t,e)=>[e]),o=e.map((t,e)=>({index:e,words:t.length,normal:t.map(t=>t.machine||t.normal||"").join(" "),pointer:r[e]}));return D.has(t)&&(t="sequential"),B.has(t)&&(t="alpha"),G.has(t)?(o=q.byFreq(o),this.update(o.map(t=>t.pointer))):"function"==typeof q[t]?(o=o.sort(q[t]),this.update(o.map(t=>t.pointer))):this}};const U=function(t,e){let n=t[t.length-1],r=n[n.length-1];return!1===/ /.test(r.post)&&(r.post+=" "),t=t.concat(e)};var W={concat:function(t){const{methods:e,document:n,world:r}=this;if("string"==typeof t){let o=e.one.tokenize.fromString(t,r),i=this.fullPointer,s=i[i.length-1][0];return v(n,s+1,o),this.compute("index")}if("object"==typeof t&&t.isView)return function(t,e){if(t.document===e.document){let n=t.fullPointer.concat(e.fullPointer);return t.toView(n).compute("index")}return e.fullPointer.forEach(e=>{e[0]+=t.document.length}),t.document=U(t.document,e.document),t.all()}(this,t);if(o=t,"[object Array]"===Object.prototype.toString.call(o)){let e=U(this.document,t);return this.document=e,this.all()}var o;return this}};var I={harden:function(){return this.ptrs=this.fullPointer,this},soften:function(){let t=this.ptrs;return!t||t.length<1||(t=t.map(t=>t.slice(0,3)),this.ptrs=t),this}};const Q=Object.assign({},{toLowerCase:function(){return this.termList().forEach(t=>{t.text=t.text.toLowerCase()}),this},toUpperCase:function(){return this.termList().forEach(t=>{t.text=t.text.toUpperCase()}),this},toTitleCase:function(){return this.termList().forEach(t=>{t.text=t.text.replace(/^ *[a-z\u00C0-\u00FF]/,t=>t.toUpperCase())}),this},toCamelCase:function(){return this.docs.forEach(t=>{t.forEach((e,n)=>{0!==n&&(e.text=e.text.replace(/^ *[a-z\u00C0-\u00FF]/,t=>t.toUpperCase())),n!==t.length-1&&(e.post="")})}),this}},$,z,F,V,M,W,I);var R={api:function(t){Object.assign(t.prototype,Q)},compute:{id:function(t){let e=t.docs;for(let t=0;t<e.length;t+=1)for(let n=0;n<e[t].length;n+=1){let r=e[t][n];r.id=r.id||k(r)}}}},H={one:{contractions:[{word:"@",out:["at"]},{word:"alot",out:["a","lot"]},{word:"brb",out:["be","right","back"]},{word:"cannot",out:["can","not"]},{word:"cant",out:["can","not"]},{word:"dont",out:["do","not"]},{word:"dun",out:["do","not"]},{word:"wont",out:["will","not"]},{word:"can't",out:["can","not"]},{word:"shan't",out:["should","not"]},{word:"won't",out:["will","not"]},{word:"that's",out:["that","is"]},{word:"dunno",out:["do","not","know"]},{word:"gonna",out:["going","to"]},{word:"gotta",out:["have","got","to"]},{word:"gimme",out:["give","me"]},{word:"tryna",out:["trying","to"]},{word:"gtg",out:["got","to","go"]},{word:"im",out:["i","am"]},{word:"imma",out:["I","will"]},{word:"imo",out:["in","my","opinion"]},{word:"irl",out:["in","real","life"]},{word:"ive",out:["i","have"]},{word:"rn",out:["right","now"]},{word:"tbh",out:["to","be","honest"]},{word:"wanna",out:["want","to"]},{word:"c'mere",out:["come","here"]},{word:"c'mon",out:["come","on"]},{word:"howd",out:["how","did"]},{word:"whatd",out:["what","did"]},{word:"whend",out:["when","did"]},{word:"whered",out:["where","did"]},{word:"tis",out:["it","is"]},{word:"twas",out:["it","was"]},{word:"y'know",out:["you","know"]},{word:"ne'er",out:["never"]},{word:"o'er",out:["over"]},{after:"ll",out:["will"]},{after:"ve",out:["have"]},{after:"re",out:["are"]},{after:"m",out:["am"]},{before:"c",out:["ce"]},{before:"m",out:["me"]},{before:"n",out:["ne"]},{before:"qu",out:["que"]},{before:"s",out:["se"]},{before:"t",out:["tu"]}]}};var Z=function(t,e,n){let[r,o]=e;n&&0!==n.length&&((n=n.map(t=>(t.implicit=t.text,t.machine=t.text,t.pre="",t.post="",t.text="",t.normal="",t)))[0]&&(n[0].pre=t[r][o].pre,n[n.length-1].post=t[r][o].post,n[0].text=t[r][o].text,n[0].normal=t[r][o].normal),t[r].splice(o,1,...n))};const K=/'/,J=new Set(["what","how","when","where","why"]),X=new Set(["be","go","start","think","need"]),Y=new Set(["been","gone"]);var tt=function(t,e){let n=t[e].normal.split(K)[0];if(J.has(n))return[n,"did"];if(t[e+1]){if(Y.has(t[e+1].normal))return[n,"had"];if(X.has(t[e+1].normal))return[n,"would"]}return null};const et=/'/;var nt=function(t,e){let n=t[e].normal.split(et)[0];if(((t,e)=>t.slice(e+1,e+3).some(t=>t.tags.has("PastTense")))(t,e))return[n,"has"];if("let"===n)return[n,"us"];if("there"===n){let r=t[e+1];if(r&&r.tags.has("Plural"))return[n,"are"]}return[n,"is"]};var rt=function(t,e){if("ain't"===t[e].normal||"aint"===t[e].normal)return null;return[t[e].normal.replace(/n't/,""),"not"]};const ot=/'/;var it=(t,e)=>["je",t[e].normal.split(ot)[1]],st=(t,e)=>{let n=t[e].normal.split(ot)[1];return n&&n.endsWith("e")?["la",n]:["le",n]},lt=(t,e)=>{let n=t[e].normal.split(ot)[1];return n&&n.endsWith("e")?["du",n]:n&&n.endsWith("s")?["des",n]:["de",n]};const at=/^([0-9.]{1,3}[a-z]{0,2}) ?[-â€“â€”] ?([0-9]{1,3}[a-z]{0,2})$/i,ct=/^([0-9]{1,2}(:[0-9][0-9])?(am|pm)?) ?[-â€“â€”] ?([0-9]{1,2}(:[0-9][0-9])?(am|pm)?)$/i;var ut=function(t,e){let n=t[e];if(!0===n.tags.has("PhoneNumber"))return null;let r=n.text.match(at);return null!==r?[r[1],"to",r[2]]:(r=n.text.match(ct),null!==r?[r[1],"to",r[4]]:null)};const ht=new Set(["here","there","she","it","he","that","here","there","your","who","what","where","why","when","how","let","else","name"]),ft=new Set(["really","very","barely","also","not","just","more","only","often","quite","so","too","well"]);var pt=(t,e)=>{let n=t[e];let[r]=n.normal.split(/'s/);if(ht.has(r))return!0;let o=t[e+1];return!(!o||!ft.has(o.normal))};const dt=/'/,gt=/^[0-9][^-â€“â€”]*[-â€“â€”].*?[0-9]/,mt=function(t,e){let n=e.update();n.document=[t],n.compute(["lexicon","preTagger","index"])},wt={t:(t,e)=>rt(t,e),d:(t,e)=>tt(t,e),s:(t,e)=>!0===pt(t,e)?nt(t,e):null},yt={j:(t,e)=>it(t,e),l:(t,e)=>st(t,e),d:(t,e)=>lt(t,e)},vt=function(t,e,n,r){for(let o=0;o<t.length;o+=1){let i=t[o];if(i.word===e.normal)return i.out;if(null!==r&&r===i.after)return[n].concat(i.out);if(null!==n&&n===i.before)return i.out.concat(r)}return null},bt=function(t,e){return e.fromText(t.join(" ")).docs[0]};var xt={model:H,compute:{contractions:t=>{let{world:e,document:n}=t;const{model:r,methods:o}=e;let i=r.one.contractions||[];n.forEach((r,s)=>{for(let l=r.length-1;l>=0;l-=1){let a=null,c=null;!0===dt.test(r[l].normal)&&([a,c]=r[l].normal.split(dt));let u=vt(i,r[l],a,c);!u&&wt.hasOwnProperty(c)&&(u=wt[c](r,l,e)),!u&&yt.hasOwnProperty(a)&&(u=yt[a](r,l)),u?(u=bt(u,t),Z(n,[s,l],u),mt(n[s],t)):gt.test(r[l].normal)&&(u=ut(r,l),u&&(u=bt(u,t),Z(n,[s,l],u),o.one.setTag(u,"NumberRange",e),u[2]&&u[2].tags.has("Time")&&o.one.setTag([u[0]],"Time",e),mt(n[s],t)))}})}},hooks:["contractions"]};var jt=function(t,e,n){const{model:r,methods:o}=n,i=o.one.setTag,s=r.one._multiCache||{},l=r.one.lexicon||{};let a=t[e],c=a.machine||a.normal;return void 0!==t[e+1]&&!0===s[c]?function(t,e,n,r,o){let i=e+4>t.length?t.length-e:4,s=t[e].machine||t[e].normal;for(let l=1;l<i;l+=1){let i=t[e+l];if(s+=" "+(i.machine||i.normal),!0===n.hasOwnProperty(s)){let i=n[s];return r(t.slice(e,e+l+1),i,o,!1,"1-multi-lexicon"),!0}}return!1}(t,e,l,i,n):null};const Et=/^(under|over|mis|re|un|dis|semi|pre|post)-?/,Ot=new Set(["Verb","Infinitive","PastTense","Gerund","PresentTense","Adjective","Participle"]);var kt=function(t,e,n){const{model:r,methods:o}=n,i=o.one.setTag,s=r.one.lexicon;let l=t[e],a=l.machine||l.normal;if(void 0!==s[a]&&s.hasOwnProperty(a)){return i([l],s[a],n,!1,"1-lexicon"),!0}if(l.alias){let t=l.alias.find(t=>s.hasOwnProperty(t));if(t){return i([l],s[t],n,"1-lexicon-alias"),!0}}if(!0===Et.test(a)){let t=a.replace(Et,"");if(s.hasOwnProperty(t)&&t.length>3&&Ot.has(s[t]))return i([l],s[t],n,"1-lexicon-prefix"),!0}return null};var Pt={model:{one:{lexicon:{},_multiCache:{}}},methods:{one:{expandLexicon:function(t){let e={},n={};return Object.keys(t).forEach(r=>{let o=t[r],i=(r=r.toLowerCase().trim()).split(/ /);i.length>1&&(n[i[0]]=!0),e[r]=e[r]||o}),delete e[""],delete e.null,delete e[" "],{lex:e,_multi:n}}}},compute:{lexicon:function(t){const e=t.world;t.docs.forEach(t=>{for(let n=0;n<t.length;n+=1)if(0===t[n].tags.size){let r=null;r=r||jt(t,n,e),r=r||kt(t,n,e)}})}},lib:{addWords:function(t){const e=this.world(),{methods:n,model:r}=e;if(t)if(Object.keys(t).forEach(e=>{"string"==typeof t[e]&&t[e].startsWith("#")&&(t[e]=t[e].replace(/^#/,""))}),n.two.expandLexicon){let{lex:o,_multi:i}=n.two.expandLexicon(t,e);Object.assign(r.one.lexicon,o),Object.assign(r.one._multiCache,i)}else if(n.one.expandLexicon){let{lex:o,_multi:i}=n.one.expandLexicon(t,e);Object.assign(r.one.lexicon,o),Object.assign(r.one._multiCache,i)}else Object.assign(r.one.lexicon,t)}},hooks:["lexicon"]};var _t=function(t,e){let n=[{}],r=[null],o=[0],i=[],s=0;t.forEach((function(t){let o=0,i=function(t,e){const{methods:n,model:r}=e;return n.one.tokenize.splitTerms(t,r).map(n.one.tokenize.splitWhitespace).map(t=>t.text.toLowerCase())}(t,e);for(let t=0;t<i.length;t++){let e=i[t];n[o]&&n[o].hasOwnProperty(e)?o=n[o][e]:(s++,n[o][e]=s,n[s]={},o=s,r[s]=null)}r[o]=[i.length]}));for(let t in n[0])s=n[0][t],o[s]=0,i.push(s);for(;i.length;){let t=i.shift(),e=Object.keys(n[t]);for(let l=0;l<e.length;l+=1){let a=e[l],c=n[t][a];for(i.push(c),s=o[t];s>0&&!n[s].hasOwnProperty(a);)s=o[s];if(n.hasOwnProperty(s)){let t=n[s][a];o[c]=t,r[t]&&(r[c]=r[c]||[],r[c]=r[c].concat(r[t]))}else o[c]=0}}return{goNext:n,endAs:r,failTo:o}};const St=function(t,e,n){let r=0,o=[];for(let i=0;i<t.length;i++){let s=t[i][n.form]||t[i].normal;for(;r>0&&(void 0===e.goNext[r]||!e.goNext[r].hasOwnProperty(s));)r=e.failTo[r]||0;if(e.goNext[r].hasOwnProperty(s)&&(r=e.goNext[r][s],e.endAs[r])){let n=e.endAs[r];for(let e=0;e<n.length;e++){let r=n[e],s=t[i-r+1],[l,a]=s.index;o.push([l,a,a+r,s.id])}}}return o},At=function(t,e){for(let n=0;n<t.length;n+=1)if(!0===e.has(t[n]))return!1;return!0};var $t=function(t,e,n){let r=[];n.form=n.form||"normal";let o=t.docs;if(!e.goNext||!e.goNext[0])return console.error("Compromise invalid lookup trie"),t.none();let i=Object.keys(e.goNext[0]);for(let s=0;s<o.length;s++){if(t._cache&&t._cache[s]&&!0===At(i,t._cache[s]))continue;let l=o[s],a=St(l,e,n);a.length>0&&(r=r.concat(a))}return t.update(r)};const Tt=(t,e)=>{for(let n=t.length-1;n>=0;n-=1)if(t[n]!==e)return t=t.slice(0,n+1);return t};var Ct=function(t){return t.goNext=t.goNext.map(t=>{if(0!==Object.keys(t).length)return t}),t.goNext=Tt(t.goNext,void 0),t.failTo=Tt(t.failTo,0),t.endAs=Tt(t.endAs,null),t};var zt={api:function(t){t.prototype.lookup=function(t,e={}){if(!t)return this.none();"string"==typeof t&&(t=[t]);let n=(r=t,"[object Object]"===Object.prototype.toString.call(r)?t:_t(t,this.world));var r;let o=$t(this,n,e);return o=o.settle(),o}},lib:{compile:function(t){const e=_t(t,this.world());return Ct(e)}}};const Nt=function(t,e){return e?(t.forEach(t=>{let n=t[0];e[n]&&(t[0]=e[n][0],t[1]+=e[n][1],t[2]+=e[n][1])}),t):t},Ft=function(t,e){let{ptrs:n,byGroup:r}=t;return n=Nt(n,e),Object.keys(r).forEach(t=>{r[t]=Nt(r[t],e)}),{ptrs:n,byGroup:r}},Lt=t=>"[object Object]"===Object.prototype.toString.call(t),Vt=t=>t&&Lt(t)&&!0===t.isView,qt=t=>t&&Lt(t)&&!0===t.isNet;var Dt={matchOne:function(t,e,n){const r=this.methods.one;if(Vt(t))return this.intersection(t).eq(0);if(qt(t))return this.sweep(t,{tagger:!1,matchOne:!0}).view;"string"==typeof t&&(t=r.parseMatch(t,n));let o={regs:t,group:e,justOne:!0},i=r.match(this.docs,o,this._cache),{ptrs:s,byGroup:l}=Ft(i,this.fullPointer),a=this.toView(s);return a._groups=l,a},match:function(t,e,n){const r=this.methods.one;if(Vt(t))return this.intersection(t);if(qt(t))return this.sweep(t,{tagger:!1}).view.settle();"string"==typeof t&&(t=r.parseMatch(t,n));let o={regs:t,group:e},i=r.match(this.docs,o,this._cache),{ptrs:s,byGroup:l}=Ft(i,this.fullPointer),a=this.toView(s);return a._groups=l,a},has:function(t,e,n){const r=this.methods.one;if(Vt(t)){return t.fullPointer.length>0}if(qt(t))return this.sweep(t,{tagger:!1}).view.found;"string"==typeof t&&(t=r.parseMatch(t,n));let o={regs:t,group:e,justOne:!0};return r.match(this.docs,o,this._cache).ptrs.length>0},if:function(t,e,n){const r=this.methods.one;if(Vt(t))return this.filter(e=>e.intersection(t).found);if(qt(t)){let e=this.sweep(t,{tagger:!1}).view.settle();return this.if(e)}"string"==typeof t&&(t=r.parseMatch(t,n));let o={regs:t,group:e,justOne:!0},i=this.fullPointer,s=this._cache||[];return i=i.filter((t,e)=>{let n=this.update([t]);return r.match(n.docs,o,s[e]).ptrs.length>0}),this.update(i)},ifNo:function(t,e,n){const{methods:r}=this,o=r.one;if(Vt(t))return this.filter(e=>!e.intersection(t).found);if(qt(t)){let e=this.sweep(t,{tagger:!1}).view.settle();return this.ifNo(e)}"string"==typeof t&&(t=o.parseMatch(t,n));let i=this._cache||[];return this.filter((n,r)=>{let s={regs:t,group:e,justOne:!0};return 0===o.match(n.docs,s,i[r]).ptrs.length})}};var Gt={before:function(t,e,n){const{indexN:r}=this.methods.one.pointer;let o=[],i=r(this.fullPointer);Object.keys(i).forEach(t=>{let e=i[t].sort((t,e)=>t[1]>e[1]?1:-1)[0];e[1]>0&&o.push([e[0],0,e[1]])});let s=this.toView(o);return t?s.match(t,e,n):s},after:function(t,e,n){const{indexN:r}=this.methods.one.pointer;let o=[],i=r(this.fullPointer),s=this.document;Object.keys(i).forEach(t=>{let e=i[t].sort((t,e)=>t[1]>e[1]?-1:1)[0],[n,,r]=e;r<s[n].length&&o.push([n,r,s[n].length])});let l=this.toView(o);return t?l.match(t,e,n):l},growLeft:function(t,e,n){"string"==typeof t&&(t=this.world.methods.one.parseMatch(t,n)),t[t.length-1].end=!0;let r=this.fullPointer;return this.forEach((n,o)=>{let i=n.before(t,e);if(i.found){let t=i.terms();r[o][1]-=t.length,r[o][3]=t.docs[0][0].id}}),this.update(r)},growRight:function(t,e,n){"string"==typeof t&&(t=this.world.methods.one.parseMatch(t,n)),t[0].start=!0;let r=this.fullPointer;return this.forEach((n,o)=>{let i=n.after(t,e);if(i.found){let t=i.terms();r[o][2]+=t.length,r[o][4]=null}}),this.update(r)},grow:function(t,e,n){return this.growRight(t,e,n).growLeft(t,e,n)}};const Bt=function(t,e){return[t[0],t[1],e[2]]},Mt=(t,e,n)=>{return"string"==typeof t||(r=t,"[object Array]"===Object.prototype.toString.call(r))?e.match(t,n):t||e.none();var r},Ut=function(t,e){let[n,r]=t;return e.document[n]&&e.document[n][r]&&(t[3]=t[3]||e.document[n][r].id),t},Wt={splitOn:function(t,e){const{splitAll:n}=this.methods.one.pointer;let r=Mt(t,this,e).fullPointer,o=n(this.fullPointer,r),i=[];return o.forEach(t=>{i.push(t.passthrough),i.push(t.before),i.push(t.match),i.push(t.after)}),i=i.filter(t=>t),i=i.map(t=>Ut(t,this)),this.update(i)},splitBefore:function(t,e){const{splitAll:n}=this.methods.one.pointer;let r=Mt(t,this,e).fullPointer,o=n(this.fullPointer,r),i=[];return o.forEach(t=>{i.push(t.passthrough),i.push(t.before),t.match&&t.after?i.push(Bt(t.match,t.after)):(i.push(t.match),i.push(t.after))}),i=i.filter(t=>t),i=i.map(t=>Ut(t,this)),this.update(i)},splitAfter:function(t,e){const{splitAll:n}=this.methods.one.pointer;let r=Mt(t,this,e).fullPointer,o=n(this.fullPointer,r),i=[];return o.forEach(t=>{i.push(t.passthrough),t.before&&t.match?i.push(Bt(t.before,t.match)):(i.push(t.before),i.push(t.match)),i.push(t.after)}),i=i.filter(t=>t),i=i.map(t=>Ut(t,this)),this.update(i)}};Wt.split=Wt.splitAfter;var It=Wt;const Qt=Object.assign({},Dt,Gt,It);Qt.lookBehind=Qt.before,Qt.lookBefore=Qt.before,Qt.lookAhead=Qt.after,Qt.lookAfter=Qt.after,Qt.notIf=Qt.ifNo;var Rt=function(t){Object.assign(t.prototype,Qt)};const Ht=/(?:^|\s)([![^]*(?:<[^<]*>)?\/.*?[^\\/]\/[?\]+*$~]*)(?:\s|$)/,Zt=/([!~[^]*(?:<[^<]*>)?\([^)]+[^\\)]\)[?\]+*$~]*)(?:\s|$)/,Kt=/ /g,Jt=t=>/^[![^]*(<[^<]*>)?\//.test(t)&&/\/[?\]+*$~]*$/.test(t),Xt=function(t){return t=(t=t.map(t=>t.trim())).filter(t=>t)};var Yt=function(t){let e=t.split(Ht),n=[];e.forEach(t=>{Jt(t)?n.push(t):n=n.concat(t.split(Zt))}),n=Xt(n);let r=[];return n.forEach(t=>{(t=>/^[![^]*(<[^<]*>)?\(/.test(t)&&/\)[?\]+*$~]*$/.test(t))(t)||Jt(t)?r.push(t):r=r.concat(t.split(Kt))}),r=Xt(r),r};const te=/\{([0-9]+)?(, *[0-9]*)?\}/,ee=/&&/,ne=new RegExp(/^<\s*(\S+)\s*>/),re=t=>t.charAt(0).toUpperCase()+t.substring(1),oe=function(t){return t[t.length-1]},ie=function(t){return t[0]},se=function(t){return t.substring(1)},le=function(t){return t.substring(0,t.length-1)},ae=function(t){return t=se(t),t=le(t)},ce=function(t,e){let n={};for(let r=0;r<2;r+=1){if("$"===oe(t)&&(n.end=!0,t=le(t)),"^"===ie(t)&&(n.start=!0,t=se(t)),("["===ie(t)||"]"===oe(t))&&(n.group=null,"["===ie(t)&&(n.groupStart=!0),"]"===oe(t)&&(n.groupEnd=!0),t=(t=t.replace(/^\[/,"")).replace(/\]$/,""),"<"===ie(t))){const e=ne.exec(t);e.length>=2&&(n.group=e[1],t=t.replace(e[0],""))}if("+"===oe(t)&&(n.greedy=!0,t=le(t)),"*"!==t&&"*"===oe(t)&&"\\*"!==t&&(n.greedy=!0,t=le(t)),"?"===oe(t)&&(n.optional=!0,t=le(t)),"!"===ie(t)&&(n.negative=!0,t=se(t)),"~"===ie(t)&&"~"===oe(t)&&t.length>2&&(t=ae(t),n.fuzzy=!0,n.min=e.fuzzy||.85,!1===/\(/.test(t)))return n.word=t,n;if("("===ie(t)&&")"===oe(t)){ee.test(t)?(n.choices=t.split(ee),n.operator="and"):(n.choices=t.split("|"),n.operator="or"),n.choices[0]=se(n.choices[0]);let r=n.choices.length-1;n.choices[r]=le(n.choices[r]),n.choices=n.choices.map(t=>t.trim()),n.choices=n.choices.filter(t=>t),n.choices=n.choices.map(t=>t.split(/ /g).map(t=>ce(t,e))),t=""}if("/"===ie(t)&&"/"===oe(t))return t=ae(t),e.caseSensitive&&(n.use="text"),n.regex=new RegExp(t),n;if("{"===ie(t)&&"}"===oe(t))return t=ae(t),/\//.test(t)?(n.sense=t,n.greedy=!0):n.machine=t,n;if("<"===ie(t)&&">"===oe(t))return t=ae(t),n.chunk=re(t),n.greedy=!0,n;if("%"===ie(t)&&"%"===oe(t))return t=ae(t),n.switch=t,n}return!0===te.test(t)&&(t=t.replace(te,(t,e,r)=>(void 0===r?(n.min=Number(e),n.max=Number(e)):(r=r.replace(/, */,""),void 0===e?(n.min=0,n.max=Number(r)):(n.min=Number(e),n.max=Number(r||999))),n.greedy=!0,n.min||(n.optional=!0),""))),"#"===ie(t)?(n.tag=se(t),n.tag=re(n.tag),n):"@"===ie(t)?(n.method=se(t),n):"."===t?(n.anything=!0,n):"*"===t?(n.anything=!0,n.greedy=!0,n.optional=!0,n):(t&&(t=(t=t.replace("\\*","*")).replace("\\.","."),e.caseSensitive?n.use="text":t=t.toLowerCase(),n.word=t),n)};var ue=ce;var he=function(t){return t=function(t){let e=0,n=null;for(let r=0;r<t.length;r++){const o=t[r];!0===o.groupStart&&(n=o.group,null===n&&(n=String(e),e+=1)),null!==n&&(o.group=n),!0===o.groupEnd&&(n=null)}return t}(t),t=function(t){return t.map(t=>(t.fuzzy&&t.choices&&t.choices.forEach(e=>{1===e.length&&e[0].word&&(e[0].fuzzy=!0,e[0].min=t.min)}),t))}(t=t.map(t=>{if(void 0!==t.choices){if("or"!==t.operator)return t;if(!0===t.fuzzy)return t;!0===t.choices.every(t=>{if(1!==t.length)return!1;let e=t[0];return!0!==e.fuzzy&&!e.start&&!e.end&&void 0!==e.word&&!0!==e.negative&&!0!==e.optional&&!0!==e.method})&&(t.fastOr=new Set,t.choices.forEach(e=>{t.fastOr.add(e[0].word)}),delete t.choices)}return t}))};var fe=function(t,e={}){if(null==t||""===t)return[];"number"==typeof t&&(t=String(t));let n=Yt(t);return n=n.map(t=>ue(t,e)),n=he(n,e),n};const pe=function(t,e){for(let n of e)if(t.has(n))return!0;return!1};var de=function(t,e){for(let n=0;n<t.length;n+=1){let r=t[n];if(!0!==r.optional&&!0!==r.negative){if(void 0!==r.word&&!1===e.has(r.word))return!0;if(void 0!==r.tag&&!1===e.has("#"+r.tag))return!0;if(r.fastOr&&!1===pe(r.fastOr,e))return!1}}return!1};var ge=function(t,e,n=3){if(t===e)return 1;if(t.length<n||e.length<n)return 0;const r=function(t,e){let n=t.length,r=e.length;if(0===n)return r;if(0===r)return n;let o=(r>n?r:n)+1;if(Math.abs(n-r)>(o||100))return o||100;let i,s,l,a,c,u,h=[];for(let t=0;t<o;t++)h[t]=[t],h[t].length=o;for(let t=0;t<o;t++)h[0][t]=t;for(let o=1;o<=n;++o)for(s=t[o-1],i=1;i<=r;++i){if(o===i&&h[o][i]>4)return n;l=e[i-1],a=s===l?0:1,c=h[o-1][i]+1,(u=h[o][i-1]+1)<c&&(c=u),(u=h[o-1][i-1]+a)<c&&(c=u);let r=o>1&&i>1&&s===e[i-2]&&t[o-2]===l&&(u=h[o-2][i-2]+a)<c;h[o][i]=r?u:c}return h[n][r]}(t,e);let o=Math.max(t.length,e.length);return 1-(0===o?0:r/o)};const me=/([\u0022\uFF02\u0027\u201C\u2018\u201F\u201B\u201E\u2E42\u201A\u00AB\u2039\u2035\u2036\u2037\u301D\u0060\u301F])/,we=/([\u0022\uFF02\u0027\u201D\u2019\u00BB\u203A\u2032\u2033\u2034\u301E\u00B4])/,ye=/^[-â€“â€”]$/,ve=/ [-â€“â€”] /,be=(t,e)=>-1!==t.post.indexOf(e),xe=(t,e)=>-1!==t.pre.indexOf(e),je={hasQuote:t=>me.test(t.pre)||we.test(t.post),hasComma:t=>be(t,","),hasPeriod:t=>!0===be(t,".")&&!1===be(t,"..."),hasExclamation:t=>be(t,"!"),hasQuestionMark:t=>be(t,"?")||be(t,"Â¿"),hasEllipses:t=>be(t,"..")||be(t,"â€¦")||xe(t,"..")||xe(t,"â€¦"),hasSemicolon:t=>be(t,";"),hasSlash:t=>/\//.test(t.text),hasHyphen:t=>ye.test(t.post)||ye.test(t.pre),hasDash:t=>ve.test(t.post)||ve.test(t.pre),hasContraction:t=>Boolean(t.implicit),isAcronym:t=>t.tags.has("Acronym"),isKnown:t=>t.tags.size>0,isTitleCase:t=>/^\p{Lu}[a-z'\u00C0-\u00FF]/u.test(t.text),isUpperCase:t=>/^\p{Lu}+$/u.test(t.text)};je.hasQuotation=je.hasQuote;var Ee=je;let Oe=function(){};Oe=function(t,e,n,r){let o=function(t,e,n,r){if(!0===e.anything)return!0;if(!0===e.start&&0!==n)return!1;if(!0===e.end&&n!==r-1)return!1;if(void 0!==e.word){if(e.use)return e.word===t[e.use];if(null!==t.machine&&t.machine===e.word)return!0;if(void 0!==t.alias&&t.alias.hasOwnProperty(e.word))return!0;if(!0===e.fuzzy){if(e.word===t.root)return!0;if(ge(e.word,t.normal)>=e.min)return!0}return!(!t.alias||!t.alias.some(t=>t===e.word))||e.word===t.text||e.word===t.normal}if(void 0!==e.tag)return!0===t.tags.has(e.tag);if(void 0!==e.method)return"function"==typeof Ee[e.method]&&!0===Ee[e.method](t);if(void 0!==e.pre)return t.pre&&t.pre.includes(e.pre);if(void 0!==e.post)return t.post&&t.post.includes(e.post);if(void 0!==e.regex){let n=t.normal;return e.use&&(n=t[e.use]),e.regex.test(n)}return void 0!==e.chunk?t.chunk===e.chunk:void 0!==e.switch?t.switch===e.switch:void 0!==e.machine?t.normal===e.machine||t.machine===e.machine||t.root===e.machine:void 0!==e.sense?t.sense===e.sense:void 0!==e.fastOr?e.fastOr.has(t.implicit)||e.fastOr.has(t.normal)||e.fastOr.has(t.text)||e.fastOr.has(t.machine):void 0!==e.choices&&("and"===e.operator?e.choices.every(e=>Oe(t,e,n,r)):e.choices.some(e=>Oe(t,e,n,r)))}(t,e,n,r);return!0===e.negative?!o:o};var ke=Oe;const Pe=function(t,e){if(!0===t.end&&!0===t.greedy&&e.start_i+e.t<e.phrase_length-1){let n=Object.assign({},t,{end:!1});if(!0===ke(e.terms[e.t],n,e.start_i+e.t,e.phrase_length))return!0}return!1},_e=function(t,e){return t.groups[t.inGroup]||(t.groups[t.inGroup]={start:e,length:0}),t.groups[t.inGroup]};var Se=function(t){let{regs:e}=t,n=e[t.r],r=function(t,e){let n=t.t;if(!e)return t.terms.length;for(;n<t.terms.length;n+=1)if(!0===ke(t.terms[n],e,t.start_i+n,t.phrase_length))return n;return null}(t,e[t.r+1]);if(null===r||0===r)return null;if(void 0!==n.min&&r-t.t<n.min)return null;if(void 0!==n.max&&r-t.t>n.max)return t.t=t.t+n.max,!0;if(!0===t.hasGroup){_e(t,t.t).length=r-t.t}return t.t=r,!0};const Ae=function(t,e=0){let n=t.regs[t.r],r=!1;for(let i=0;i<n.choices.length;i+=1){let s=n.choices[i];if(o=s,"[object Array]"!==Object.prototype.toString.call(o))return!1;if(r=s.every((n,r)=>{let o=0,i=t.t+r+e+o;if(void 0===t.terms[i])return!1;let s=ke(t.terms[i],n,i+t.start_i,t.phrase_length);if(!0===s&&!0===n.greedy)for(let e=1;e<t.terms.length;e+=1){let r=t.terms[i+e];if(r){if(!0!==ke(r,n,t.start_i+e,t.phrase_length))break;o+=1}}return e+=o,s}),r){e+=s.length;break}}var o;return r&&!0===n.greedy?Ae(t,e):e};var $e=function(t){const{regs:e}=t;let n=e[t.r],r=Ae(t);if(r){if(!0===n.negative)return null;if(!0===t.hasGroup){_e(t,t.t).length+=r}if(!0===n.end){let e=t.phrase_length;if(t.t+t.start_i+r!==e)return null}return t.t+=r,!0}return!!n.optional||null};var Te=function(t){const{regs:e}=t;let n=e[t.r],r=function(t){let e=0;return!0===t.regs[t.r].choices.every(n=>{let r=n.every((e,n)=>{let r=t.t+n;return void 0!==t.terms[r]&&ke(t.terms[r],e,r,t.phrase_length)});return!0===r&&n.length>e&&(e=n.length),r})&&e}(t);if(r){if(!0===n.negative)return null;if(!0===t.hasGroup){_e(t,t.t).length+=r}if(!0===n.end){let e=t.phrase_length-1;if(t.t+t.start_i!==e)return null}return t.t+=r,!0}return!!n.optional||null};var Ce=function(t){const{regs:e}=t;let n=e[t.r],r=Object.assign({},n);return r.negative=!1,!0!==ke(t.terms[t.t],r,t.start_i+t.t,t.phrase_length)||null};var ze=function(t){const{regs:e}=t;let n=e[t.r],r=t.terms[t.t],o=ke(r,e[t.r+1],t.start_i+t.t,t.phrase_length);if(n.negative||o){let n=t.terms[t.t+1];n&&ke(n,e[t.r+1],t.start_i+t.t,t.phrase_length)||(t.r+=1)}};var Ne=function(t){const{regs:e,phrase_length:n}=t;let r=e[t.r];return t.t=function(t,e){let n=Object.assign({},t.regs[t.r],{start:!1,end:!1}),r=t.t;for(;t.t<t.terms.length;t.t+=1){if(e&&ke(t.terms[t.t],e,t.start_i+t.t,t.phrase_length))return t.t;let o=t.t-r+1;if(void 0!==n.max&&o===n.max)return t.t;if(!1===ke(t.terms[t.t],n,t.start_i+t.t,t.phrase_length))return void 0!==n.min&&o<n.min?null:t.t}return t.t}(t,e[t.r+1]),null===t.t||r.min&&r.min>t.t?null:!0!==r.end||t.start_i+t.t===n||null};var Fe=function(t){let e=t.terms[t.t],n=t.regs[t.r];if(e.implicit&&t.terms[t.t+1]){if(!t.terms[t.t+1].implicit)return;n.word===e.normal&&(t.t+=1),"hasContraction"===n.method&&(t.t+=1)}};var Le=function(t){const{regs:e}=t;let n=e[t.r],r=t.terms[t.t],o=t.t;if(n.optional&&e[t.r+1]&&n.negative)return!0;if(n.optional&&e[t.r+1]&&ze(t),r.implicit&&t.terms[t.t+1]&&Fe(t),t.t+=1,!0===n.end&&t.t!==t.terms.length&&!0!==n.greedy)return null;if(!0===n.greedy){if(!Ne(t))return null}return!0===t.hasGroup&&function(t,e){let n=t.regs[t.r];const r=_e(t,e);t.t>1&&n.greedy?r.length+=t.t-e:r.length++}(t,o),!0};var Ve=function(t,e,n,r){if(0===t.length||0===e.length)return null;let o={t:0,terms:t,r:0,regs:e,groups:{},start_i:n,phrase_length:r,inGroup:null};for(;o.r<e.length;o.r+=1){let t=e[o.r];if(o.hasGroup=Boolean(t.group),!0===o.hasGroup?o.inGroup=t.group:o.inGroup=null,!o.terms[o.t]){if(!1===e.slice(o.r).some(t=>!t.optional))break;return null}if(!0!==t.anything||!0!==t.greedy)if(void 0===t.choices||"or"!==t.operator)if(void 0===t.choices||"and"!==t.operator)if(!0!==t.anything)if(!0!==Pe(t,o))if(!0!==ke(o.terms[o.t],t,o.start_i+o.t,o.phrase_length)){if(t.negative){if(!Ce(o))return null}if(!0!==t.optional)return null}else{if(!Le(o))return null}else{if(!Le(o))return null}else{if(!Le(o))return null}else{if(!Te(o))return null}else{if(!$e(o))return null}else{if(!Se(o))return null}}let i=[null,n,o.t+n];if(i[1]===i[2])return null;let s={};return Object.keys(o.groups).forEach(t=>{let e=o.groups[t],r=n+e.start;s[t]=[null,r,r+e.length]}),{pointer:i,groups:s}};var qe=function(t,e){let n=[],r={};return 0===t.length||("number"==typeof e&&(e=String(e)),e?t.forEach(t=>{t.groups[e]&&n.push(t.groups[e])}):t.forEach(t=>{n.push(t.pointer),Object.keys(t.groups).forEach(e=>{r[e]=r[e]||[],r[e].push(t.groups[e])})})),{ptrs:n,byGroup:r}};const De=function(t,e){return t.pointer[0]=e,Object.keys(t.groups).forEach(n=>{t.groups[n][0]=e}),t},Ge=function(t,e,n){let r=Ve(t,e,0,t.length);return r?(r=De(r,n),r):null};var Be={api:Rt,methods:{one:{termMethods:Ee,parseMatch:fe,match:function(t,e,n){n=n||[];let{regs:r,group:o,justOne:i}=e,s=[];if(!r||0===r.length)return{ptrs:[],byGroup:{}};const l=r.filter(t=>!0!==t.optional&&!0!==t.negative).length;t:for(let e=0;e<t.length;e+=1){let o=t[e];if(!n[e]||!de(r,n[e]))if(!0!==r[0].start)for(let t=0;t<o.length;t+=1){let n=o.slice(t);if(n.length<l)break;let a=Ve(n,r,t,o.length);if(a){if(a=De(a,e),s.push(a),!0===i)break t;let n=a.pointer[2];Math.abs(n-1)>t&&(t=Math.abs(n-1))}}else{let t=Ge(o,r,e);t&&s.push(t)}}return!0===r[r.length-1].end&&(s=s.filter(e=>{let n=e.pointer[0];return t[n].length===e.pointer[2]})),s=qe(s,o),s.ptrs.forEach(e=>{let[n,r,o]=e;e[3]=t[n][r].id,e[4]=t[n][o-1].id}),s}}},lib:{parseMatch:function(t,e){return this.world().methods.one.parseMatch(t,e)}}};const Me=/^\../,Ue=/^#./,We=function(t,e){let n={},r={};return Object.keys(e).forEach(o=>{let i=e[o],s=function(t){let e="",n="</span>";return t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"),Me.test(t)?e=`<span class="${t.replace(/^\./,"")}"`:Ue.test(t)?e=`<span id="${t.replace(/^#/,"")}"`:(e="<"+t,n=`</${t}>`),e+=">",{start:e,end:n}}(o);"string"==typeof i&&(i=t.match(i)),i.docs.forEach(t=>{if(t.every(t=>t.implicit))return;let e=t[0].id;n[e]=n[e]||[],n[e].push(s.start);let o=t[t.length-1].id;r[o]=r[o]||[],r[o].push(s.end)})}),{starts:n,ends:r}};var Ie={html:function(t){let{starts:e,ends:n}=We(this,t),r="";return this.docs.forEach(t=>{for(let o=0;o<t.length;o+=1){let i=t[o];e.hasOwnProperty(i.id)&&(r+=e[i.id].join("")),r+=i.pre||""+i.text||"",n.hasOwnProperty(i.id)&&(r+=n[i.id].join("")),r+=i.post||""}}),r}};const Qe=/[,:;)\]*.?~!\u0022\uFF02\u201D\u2019\u00BB\u203A\u2032\u2033\u2034\u301E\u00B4â€”-]+$/,Re=/^[(['"*~\uFF02\u201C\u2018\u201F\u201B\u201E\u2E42\u201A\u00AB\u2039\u2035\u2036\u2037\u301D\u0060\u301F]+/,He=/[,:;)('"\u201D\]]/,Ze=/^[-â€“â€”]$/,Ke=/ /,Je=function(t,e,n=!0){let r="";return t.forEach(t=>{let n=t.pre||"",o=t.post||"";"some"===e.punctuation&&(n=n.replace(Re,""),Ze.test(o)&&(o=" "),o=o.replace(He,""),o=o.replace(/\?!+/,"?"),o=o.replace(/!+/,"!"),o=o.replace(/\?+/,"?"),o=o.replace(/\.{2,}/,""),t.tags.has("Abbreviation")&&(o=o.replace(/\./,""))),"some"===e.whitespace&&(n=n.replace(/\s/,""),o=o.replace(/\s+/," ")),e.keepPunct||(n=n.replace(Re,""),o="-"===o?" ":o.replace(Qe,""));let i=t[e.form||"text"]||t.normal||"";"implicit"===e.form&&(i=t.implicit||t.text),"root"===e.form&&t.implicit&&(i=t.root||t.implicit||t.normal),"machine"!==e.form&&"implicit"!==e.form&&"root"!==e.form||!t.implicit||o&&Ke.test(o)||(o+=" "),r+=n+i+o}),!1===n&&(r=r.trim()),!0===e.lowerCase&&(r=r.toLowerCase()),r},Xe={text:{form:"text"},normal:{whitespace:"some",punctuation:"some",case:"some",unicode:"some",form:"normal"},machine:{whitespace:"some",punctuation:"some",case:"none",unicode:"some",form:"machine"},root:{whitespace:"some",punctuation:"some",case:"some",unicode:"some",form:"root"},implicit:{form:"implicit"}};Xe.clean=Xe.normal,Xe.reduced=Xe.root;var Ye=Xe;const tn={text:!0,terms:!0};let en={case:"none",unicode:"some",form:"machine",punctuation:"some"};const nn=function(t,e){return Object.assign({},t,e)},rn={text:t=>Je(t,{keepPunct:!0},!1),normal:t=>Je(t,nn(Ye.normal,{keepPunct:!0}),!1),implicit:t=>Je(t,nn(Ye.implicit,{keepPunct:!0}),!1),machine:t=>Je(t,en,!1),root:t=>Je(t,nn(en,{form:"root"}),!1),offset:t=>{let e=rn.text(t).length;return{index:t[0].offset.index,start:t[0].offset.start,length:e}},terms:t=>t.map(t=>{let e=Object.assign({},t);return e.tags=Array.from(t.tags),e}),confidence:(t,e,n)=>e.eq(n).confidence(),syllables:(t,e,n)=>e.eq(n).syllables(),sentence:(t,e,n)=>e.eq(n).fullSentence().text(),dirty:t=>t.some(t=>!0===t.dirty)};rn.sentences=rn.sentence,rn.clean=rn.normal,rn.reduced=rn.root;const on={json:function(t){let e=(n=this,"string"==typeof(r=(r=t)||{})&&(r={}),(r=Object.assign({},tn,r)).offset&&n.compute("offset"),n.docs.map((t,e)=>{let o={};return Object.keys(r).forEach(i=>{r[i]&&rn[i]&&(o[i]=rn[i](t,n,e))}),o}));var n,r;return"number"==typeof t?e[t]:e}};on.data=on.json;var sn=on;var ln=function(t){console.log("%c -=-=- ","background-color:#6699cc;"),t.forEach(t=>{console.groupCollapsed(t.text());let e=t.docs[0].map(t=>{let e=t.text||"-";return t.implicit&&(e="["+t.implicit+"]"),{text:e,tags:"["+Array.from(t.tags).join(", ")+"]"}});console.table(e,["text","tags"]),console.groupEnd()})};var an={green:t=>"[32m"+t+"[0m",red:t=>"[31m"+t+"[0m",blue:t=>"[34m"+t+"[0m",magenta:t=>"[35m"+t+"[0m",cyan:t=>"[36m"+t+"[0m",yellow:t=>"[33m"+t+"[0m",black:t=>"[30m"+t+"[0m",dim:t=>"[2m"+t+"[0m",i:t=>"[3m"+t+"[0m"};var cn=function(t){let{docs:e,model:n}=t;0===e.length&&console.log(an.blue("\n     â”€â”€â”€â”€â”€â”€")),e.forEach(t=>{console.log(an.blue("\n  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€")),t.forEach(t=>{let e=[...t.tags||[]],r=t.text||"-";t.sense&&(r="{"+t.sense+"}"),t.implicit&&(r="["+t.implicit+"]"),r=an.yellow(r);let o="'"+r+"'";o=o.padEnd(18);let i=an.blue("  â”‚ ")+an.i(o)+"  - "+function(t,e){return e.one.tagSet&&(t=t.map(t=>{if(!e.one.tagSet.hasOwnProperty(t))return t;const n=e.one.tagSet[t].color||"blue";return an[n](t)})),t.join(", ")}(e,n);console.log(i)})})};var un=function(t){let{docs:e}=t;console.log(""),e.forEach(t=>{let e=[];t.forEach(t=>{"Noun"===t.chunk?e.push(an.blue(t.implicit||t.normal)):"Verb"===t.chunk?e.push(an.green(t.implicit||t.normal)):"Adjective"===t.chunk?e.push(an.yellow(t.implicit||t.normal)):"Pivot"===t.chunk?e.push(an.red(t.implicit||t.normal)):e.push(t.implicit||t.normal)}),console.log(e.join(" "),"\n")})};var hn=function(t){if(!t.found)return;let e={};t.fullPointer.forEach(t=>{e[t[0]]=e[t[0]]||[],e[t[0]].push(t)}),Object.keys(e).forEach(n=>{let r=t.update([[Number(n)]]).text();t.update(e[n]).json({offset:!0}).forEach((t,e)=>{r=function(t,e,n){let r=((t,e,n)=>{let r=9*n,o=e.start+r,i=o+e.length;return[t.substring(0,o),t.substring(o,i),t.substring(i,t.length)]})(t,e,n);return`${r[0]}${an.blue(r[1])}${r[2]}`}(r,t.offset,e)}),console.log(r)})};const fn=function(t){let e=t.pre||"",n=t.post||"";return e+t.text+n};var pn=function(t,e){let n=function(t,e){let n={};return Object.keys(e).forEach(r=>{t.match(r).fullPointer.forEach(t=>{n[t[3]]={fn:e[r],end:t[2]}})}),n}(t,e),r="";return t.docs.forEach((e,o)=>{for(let i=0;i<e.length;i+=1){let s=e[i];if(n.hasOwnProperty(s.id)){let{fn:l,end:a}=n[s.id],c=t.update([[o,i,a]]);r+=l(c),i=a-1,r+=e[i].post||""}else r+=fn(s)}}),r};var dn={debug:function(t={}){let e=this;if("string"==typeof t){let e={};e[t]=!0,t=e}return"undefined"!=typeof window&&window.document?(ln(e),e):(!1!==t.tags&&(cn(e),console.log("\n")),!0===t.chunks&&(un(e),console.log("\n")),!0===t.highlight&&(hn(e),console.log("\n")),e)},out:function(t){if(e=t,"[object Object]"===Object.prototype.toString.call(e))return pn(this,t);var e;if("text"===t)return this.text();if("normal"===t)return this.text("normal");if("machine"===t||"reduced"===t)return this.text("machine");if("json"===t)return this.json();if("offset"===t||"offsets"===t)return this.compute("offset"),this.json({offset:!0});if("array"===t){return this.docs.map(t=>t.reduce((t,e)=>t+e.pre+e.text+e.post,"").trim()).filter(t=>t)}if("freq"===t||"frequency"===t||"topk"===t)return function(t){let e={};return t.forEach(t=>{e[t]=e[t]||0,e[t]+=1}),Object.keys(e).map(t=>({normal:t,count:e[t]})).sort((t,e)=>t.count>e.count?-1:0)}(this.json({normal:!0}).map(t=>t.normal));if("terms"===t){let t=[];return this.docs.forEach(e=>{let n=e.terms.map(t=>t.text);n=n.filter(t=>t),t=t.concat(n)}),t}return"tags"===t?this.docs.map(t=>t.reduce((t,e)=>(t[e.implicit||e.normal]=Array.from(e.tags),t),{})):"debug"===t?this.debug():this.text()}};var gn={text:function(t){let e={keepSpace:!0,keepPunct:!0};var n;if(t&&"string"==typeof t&&Ye.hasOwnProperty(t)?e=Object.assign({},Ye[t]):t&&(n=t,"[object Object]"===Object.prototype.toString.call(n))&&(e=Object.assign({},t,e)),this.pointer){e.keepSpace=!1;let t=this.pointer[0];t&&t[1]?e.keepPunct=!1:e.keepPunct=!0}else e.keepPunct=!0;return function(t,e){let n="";if(!t||!t[0]||!t[0][0])return n;for(let r=0;r<t.length;r+=1)n+=Je(t[r],e,!0);if(e.keepSpace||(n=n.trim()),!1===e.keepPunct){t[0][0].tags.has("Emoticon")||(n=n.replace(Re,""));let e=t[t.length-1];e[e.length-1].tags.has("Emoticon")||(n=n.replace(Qe,""))}return!0===e.cleanWhitespace&&(n=n.trim()),n}(this.docs,e)}};const mn=Object.assign({},dn,gn,sn,Ie);var wn={api:function(t){Object.assign(t.prototype,mn)}};const yn=function(t,e){if(t[0]!==e[0])return!1;let[,n,r]=t,[,o,i]=e;return n<=o&&r>o||o<=n&&i>n},vn=function(t){let e={};return t.forEach(t=>{e[t[0]]=e[t[0]]||[],e[t[0]].push(t)}),e};var bn=function(t,e){let n=vn(e),r=[];return t.forEach(t=>{let[e]=t,o=n[e]||[];if(o=o.filter(e=>function(t,e){return t[1]<=e[1]&&e[2]<=t[2]}(t,e)),0===o.length)return void r.push({passthrough:t});o=o.sort((t,e)=>t[1]-e[1]);let i=t;o.forEach((t,e)=>{let n=function(t,e){let[n,r]=t,o=e[1],i=e[2],s={};if(r<o){let e=o<t[2]?o:t[2];s.before=[n,r,e]}return s.match=e,t[2]>i&&(s.after=[n,i,t[2]]),s}(i,t);o[e+1]?(r.push({before:n.before,match:n.match}),n.after&&(i=n.after)):r.push(n)})}),r};var xn={one:{termList:function(t){let e=[];for(let n=0;n<t.length;n+=1)for(let r=0;r<t[n].length;r+=1)e.push(t[n][r]);return e},getDoc:function(t,e){let n=[];return t.forEach((r,o)=>{if(!r)return;let[i,s,l,a,c]=r,u=e[i]||[];if(void 0===s&&(s=0),void 0===l&&(l=u.length),!a||u[s]&&u[s].id===a)u=u.slice(s,l);else{let n=function(t,e,n){for(let r=0;r<4;r+=1){if(e[n-r]){let o=e[n-r].findIndex(e=>e.id===t);if(-1!==o)return[n-r,o]}if(e[n+r]){let o=e[n+r].findIndex(e=>e.id===t);if(-1!==o)return[n+r,o]}}return null}(a,e,i);if(null!==n){let r=l-s;u=e[n[0]].slice(n[1],n[1]+r);let i=u[0]?u[0].id:null;t[o]=[n[0],n[1],n[1]+r,i]}}0!==u.length&&s!==l&&(c&&u[u.length-1].id!==c&&(u=function(t,e){let[n,r,,,o]=t,i=e[n],s=i.findIndex(t=>t.id===o);return-1===s?(t[2]=e[n].length,t[4]=i.length?i[i.length-1].id:null):t[2]=s,e[n].slice(r,t[2]+1)}(r,e)),n.push(u))}),n},pointer:{indexN:vn,splitAll:bn}}};var jn=function(t,e){let n=t.concat(e),r=vn(n),o=[];return n.forEach(t=>{let[e]=t;if(1===r[e].length)return void o.push(t);let n=r[e].filter(e=>yn(t,e));n.push(t);let i=function(t){let e=t[0][1],n=t[0][2];return t.forEach(t=>{t[1]<e&&(e=t[1]),t[2]>n&&(n=t[2])}),[t[0][0],e,n]}(n);o.push(i)}),o=function(t){let e={};for(let n=0;n<t.length;n+=1)e[t[n].join(",")]=t[n];return Object.values(e)}(o),o};var En=function(t,e){let n=[];return bn(t,e).forEach(t=>{t.passthrough&&n.push(t.passthrough),t.before&&n.push(t.before),t.after&&n.push(t.after)}),n};var On=function(t,e){let n=vn(e),r=[];return t.forEach(t=>{let e=n[t[0]]||[];e=e.filter(e=>yn(t,e)),0!==e.length&&e.forEach(e=>{let n=function(t,e){let n=t[1]<e[1]?e[1]:t[1],r=t[2]>e[2]?e[2]:t[2];return n<r?[t[0],n,r]:null}(t,e);n&&r.push(n)})}),r};const kn=(t,e)=>{return"string"==typeof t||(n=t,"[object Array]"===Object.prototype.toString.call(n))?e.match(t):t||e.none();var n},Pn=function(t,e){return t.map(t=>{let[n,r]=t;return e[n]&&e[n][r]&&(t[3]=e[n][r].id),t})},_n={union:function(t){t=kn(t,this);let e=jn(this.fullPointer,t.fullPointer);return e=Pn(e,this.document),this.toView(e)}};_n.and=_n.union,_n.intersection=function(t){t=kn(t,this);let e=On(this.fullPointer,t.fullPointer);return e=Pn(e,this.document),this.toView(e)},_n.not=function(t){t=kn(t,this);let e=En(this.fullPointer,t.fullPointer);return e=Pn(e,this.document),this.toView(e)},_n.difference=_n.not,_n.complement=function(){let t=this.all(),e=En(t.fullPointer,this.fullPointer);return e=Pn(e,this.document),this.toView(e)},_n.settle=function(){let t=this.fullPointer;return t.forEach(e=>{t=jn(t,[e])}),t=Pn(t,this.document),this.update(t)};var Sn={methods:xn,api:function(t){Object.assign(t.prototype,_n)}};var An=function(t,e){const n=e.one.parseMatch;return t.forEach(t=>{t.regs=n(t.match),"string"==typeof t.ifNo&&(t.ifNo=[t.ifNo])}),t};var $n=function(t){let e=[];return t.forEach(t=>{let n=t.regs.findIndex(t=>"or"===t.operator&&t.fastOr&&!t.optional&&!t.negative);if(-1===n)if(n=t.regs.findIndex(t=>"or"===t.operator&&t.choices&&!t.optional&&!t.negative),-1===n)e.push(t);else{(function(t,e){let n=t.regs[e];return n.choices.map(t=>1===t.length?t[0]:{choices:t,operator:n.operator})})(t,n).forEach(r=>{let o=Object.assign({},t);o.regs=t.regs.slice(0),o.regs[n]=r,//!fixme [mo]?
o._expanded=!0,e.push(o)})}else{(function(t,e){let n=t.regs[e];return Array.from(n.fastOr).map(t=>{let e=Object.assign({},n);return delete e.fastOr,delete e.operator,e.word=t,e})})(t,n).forEach(r=>{let o=Object.assign({},t);o.regs=t.regs.slice(0),o.regs[n]=r,o._expanded=!0,e.push(o)})}}),e};const Tn=function(t){return!0===t.optional||!0===t.negative?null:t.tag?"#"+t.tag:t.word?t.word:null};var Cn=function(t){return t.forEach(t=>{t.needs=Array.from(function(t){let e=new Set;return t.forEach(t=>{let n=Tn(t);n?e.add(n):"and"===t.operator&&t.choices&&t.choices.forEach(t=>{t.forEach(t=>{let n=Tn(t);n&&e.add(n)})})}),e}(t.regs))}),t};var zn=function(t){let e={};return t.forEach(t=>{t.needs.forEach(n=>{e[n]=e[n]||[],e[n].push(t)})}),e};var Nn=function(t,e){return t.map(t=>{let n=[];return t.forEach(t=>{e.hasOwnProperty(t)&&(n=n.concat(e[t]))}),new Set(n)})};var Fn=function(t,e){for(let n=0;n<e.length;n+=1){let r=e[n];t[n]=Array.from(t[n]).filter(t=>t.needs.every(t=>r.has(t))),t[n]=t[n].filter(t=>void 0===t.ifNo||!0!==t.ifNo.some(t=>e[n].has(t)))}return t};var Ln=function(t,e,n,r){let o=[];for(let i=0;i<t.length;i+=1)for(let s=0;s<t[i].length;s+=1){let l=t[i][s],a=n.one.match([e[i]],l);if(a.ptrs.length>0&&(a.ptrs.forEach(t=>{t[0]=i;let e=Object.assign({},l,{pointer:t});void 0!==l.unTag&&(e.unTag=l.unTag),o.push(e)}),!0===r.matchOne))return[o[0]]}return o};var Vn=function(t,e){let[n,r,o]=t.pointer,i=e[n],s=r>4?r-2:0,l="string"!=typeof t.tag?t.tag.join(" #"):t.tag,a=`  [${t.reason}]`.padEnd(20)+" - ";const c=t=>"[2m"+t+"[0m";for(;s<i.length&&!(s>o+2);s+=1){let t=i[s].machine||i[s].normal;a+=s>r&&s<o?`[32m${t}[0m `:c(t)+" "}a+="  [32mâ†’[0m #"+l.padEnd(12)+"  ",console.log(a)};var qn=function(t,e,n){let r=n.one.tagSet;if(!r.hasOwnProperty(e))return!0;let o=r[e].not||[];for(let e=0;e<t.length;e+=1){let n=t[e];for(let t=0;t<o.length;t+=1)if(!0===n.tags.has(o[t]))return!1}return!0};var Dn={lib:{buildNet:function(t){const e=this.methods();let{index:n,always:r}=e.two.makeNet(t,e);return{isNet:!0,index:n,always:r}}},api:function(t){t.prototype.sweep=function(t,e={}){const{world:n,document:r}=this,{methods:o}=n;let i=o.two.bulkMatch(r,t,this.methods,e);!1!==e.tagger&&o.two.bulkTagger(i,r,this.world);let s=i.map(t=>t.pointer);return i=i.map(t=>(t.view=this.update([t.pointer]),delete t.regs,delete t.needs,delete t.pointer,delete t._expanded,t)),{view:this.update(s),found:i}}},methods:{two:{makeNet:function(t,e){t=An(t,e),t=$n(t),t=$n(t);let n=(t=Cn(t,e)).filter(t=>0===t.needs.length),r=zn(t,e);return delete r["#Noun"],delete r["#Verb"],{index:r,always:n}},bulkMatch:function(t,e,n,r={}){let o=n.one.cacheDoc(t),i=Nn(o,e.index);return i=Fn(i,o),0===e.always.length&&(i[0]=i[0]||[],i[0]=i[0].concat(e.always)),Ln(i,t,n,r)},bulkTagger:function(t,e,n){const{model:r,methods:o}=n,{getDoc:i,setTag:s,unTag:l}=o.one;if(0===t.length)return t;const a="undefined"!=typeof process&&process.env?process.env:self.env||{};return a.DEBUG_TAGS&&console.log(`\n  [32mâ†’ ${t.length} corrections:[0m`),t.map(t=>{if(!t.tag)return;a.DEBUG_TAGS&&Vn(t,e);let o=i([t.pointer],e)[0];if(!0===t.safe){if(!1===qn(o,t.tag,r))return;if("-"===o[o.length-1].post)return}void 0!==t.tag&&(s(o,t.tag,n,t.safe),1===o.length&&"Noun"===t.tag&&o[0].text&&null!==o[0].text.match(/..s$/)&&s(o,"Plural",n,t.safe)),void 0!==t.unTag&&l(o,t.unTag,n,t.safe)})}}}};const Gn=/ /,Bn=function(t,e){"Noun"===e&&(t.chunk=e),"Verb"===e&&(t.chunk=e)},Mn=function(t,e,n,r){if(!0===t.tags.has(e))return null;if("."===e)return null;let o=n[e];if(o){if(o.not&&o.not.length>0)for(let e=0;e<o.not.length;e+=1){if(!0===r&&t.tags.has(o.not[e]))return null;t.tags.delete(o.not[e])}if(o.parents&&o.parents.length>0)for(let e=0;e<o.parents.length;e+=1)t.tags.add(o.parents[e]),Bn(t,o.parents[e])}return t.tags.add(e),t.dirty=!0,Bn(t,e),!0},Un=function(t,e,n={},r,o){const i=n.model.one.tagSet||{};if(!e)return;const s="undefined"!=typeof process&&process.env?process.env:self.env||{};var l;if(s&&s.DEBUG_TAGS&&((t,e,n="")=>{let r=t.text||"["+t.implicit+"]";var o;"string"!=typeof e&&e.length>2&&(e=e.slice(0,2).join(", #")+" +"),e="string"!=typeof e?e.join(", #"):e,console.log(` ${(o=r,"[33m[3m"+o+"[0m").padEnd(24)} [32mâ†’[0m #${e.padEnd(25)}  ${(t=>"[3m"+t+"[0m")(n)}`)})(t[0],e,o),!0!=(l=e,"[object Array]"===Object.prototype.toString.call(l)))if(e=e.trim(),Gn.test(e))!function(t,e,n,r){let o=e.split(Gn);t.forEach((t,e)=>{let i=o[e];i&&(i=i.replace(/^#/,""),Mn(t,i,n,r))})}(t,e,i,r);else{e=e.replace(/^#/,"");for(let n=0;n<t.length;n+=1)Mn(t[n],e,i,r)}else e.forEach(e=>Un(t,e,n,r))};var Wn=Un;var In=function(t,e,n){e=e.trim().replace(/^#/,"");for(let r=0;r<t.length;r+=1){let o=t[r];if("*"===e){o.tags.clear();continue}let i=n[e];if(i&&i.children.length>0)for(let t=0;t<i.children.length;t+=1)o.tags.delete(i.children[t]);o.tags.delete(e)}};const Qn=function(t){return t.children=t.children||[],t._cache=t._cache||{},t.props=t.props||{},t._cache.parents=t._cache.parents||[],t._cache.children=t._cache.children||[],t},Rn=/^ *(#|\/\/)/,Hn=function(t){let e=t.trim().split(/->/),n=[];e.forEach(t=>{n=n.concat(function(t){if(!(t=t.trim()))return null;if(/^\[/.test(t)&&/\]$/.test(t)){let e=(t=(t=t.replace(/^\[/,"")).replace(/\]$/,"")).split(/,/);return e=e.map(t=>t.trim()).filter(t=>t),e=e.map(t=>Qn({id:t})),e}return[Qn({id:t})]}(t))}),n=n.filter(t=>t);let r=n[0];for(let t=1;t<n.length;t+=1)r.children.push(n[t]),r=n[t];return n[0]},Zn=(t,e)=>{let n=[],r=[t];for(;r.length>0;){let t=r.pop();n.push(t),t.children&&t.children.forEach(n=>{e&&e(t,n),r.push(n)})}return n},Kn=t=>"[object Array]"===Object.prototype.toString.call(t),Jn=t=>(t=t||"").trim(),Xn=function(t=[]){return"string"==typeof t?function(t){let e=t.split(/\r?\n/),n=[];e.forEach(t=>{if(!t.trim()||Rn.test(t))return;let e=(t=>{const e=/^( {2}|\t)/;let n=0;for(;e.test(t);)t=t.replace(e,""),n+=1;return n})(t);n.push({indent:e,node:Hn(t)})});let r=function(t){let e={children:[]};return t.forEach((n,r)=>{0===n.indent?e.children=e.children.concat(n.node):t[r-1]&&function(t,e){let n=t[e].indent;for(;e>=0;e-=1)if(t[e].indent<n)return t[e];return t[0]}(t,r).node.children.push(n.node)}),e}(n);return r=Qn(r),r}(t):Kn(t)?function(t){let e={};t.forEach(t=>{e[t.id]=t});let n=Qn({});return t.forEach(t=>{if((t=Qn(t)).parent)if(e.hasOwnProperty(t.parent)){let n=e[t.parent];delete t.parent,n.children.push(t)}else console.warn(`[Grad] - missing node '${t.parent}'`);else n.children.push(t)}),n}(t):(Zn(e=t).forEach(Qn),e);var e},Yn=function(t,e){let n="-> ";e&&(n=(t=>"[2m"+t+"[0m")("â†’ "));let r="";return Zn(t).forEach((t,o)=>{let i=t.id||"";if(e&&(i=(t=>"[31m"+t+"[0m")(i)),0===o&&!t.id)return;let s=t._cache.parents.length;r+="    ".repeat(s)+n+i+"\n"}),r},tr=function(t){let e=Zn(t);e.forEach(t=>{delete(t=Object.assign({},t)).children});let n=e[0];return n&&!n.id&&0===Object.keys(n.props).length&&e.shift(),e},er={text:Yn,txt:Yn,array:tr,flat:tr},nr=function(t,e){return"nested"===e||"json"===e?t:"debug"===e?(console.log(Yn(t,!0)),null):er.hasOwnProperty(e)?er[e](t):t},rr=t=>{Zn(t,(t,e)=>{t.id&&(t._cache.parents=t._cache.parents||[],e._cache.parents=t._cache.parents.concat([t.id]))})},or=/\//;class g{constructor(t={}){Object.defineProperty(this,"json",{enumerable:!1,value:t,writable:!0})}get children(){return this.json.children}get id(){return this.json.id}get found(){return this.json.id||this.json.children.length>0}props(t={}){let e=this.json.props||{};return"string"==typeof t&&(e[t]=!0),this.json.props=Object.assign(e,t),this}get(t){if(t=Jn(t),!or.test(t)){let e=this.json.children.find(e=>e.id===t);return new g(e)}let e=((t,e)=>{let n=(t=>"string"!=typeof t?t:(t=t.replace(/^\//,"")).split(/\//))(e=e||"");for(let e=0;e<n.length;e+=1){let r=t.children.find(t=>t.id===n[e]);if(!r)return null;t=r}return t})(this.json,t)||Qn({});return new g(e)}add(t,e={}){if(Kn(t))return t.forEach(t=>this.add(Jn(t),e)),this;t=Jn(t);let n=Qn({id:t,props:e});return this.json.children.push(n),new g(n)}remove(t){return t=Jn(t),this.json.children=this.json.children.filter(e=>e.id!==t),this}nodes(){return Zn(this.json).map(t=>(delete(t=Object.assign({},t)).children,t))}cache(){return(t=>{let e=Zn(t,(t,e)=>{t.id&&(t._cache.parents=t._cache.parents||[],t._cache.children=t._cache.children||[],e._cache.parents=t._cache.parents.concat([t.id]))}),n={};e.forEach(t=>{t.id&&(n[t.id]=t)}),e.forEach(t=>{t._cache.parents.forEach(e=>{n.hasOwnProperty(e)&&n[e]._cache.children.push(t.id)})}),t._cache.children=Object.keys(n)})(this.json),this}list(){return Zn(this.json)}fillDown(){var t;return t=this.json,Zn(t,(t,e)=>{e.props=((t,e)=>(Object.keys(e).forEach(n=>{if(e[n]instanceof Set){let r=t[n]||new Set;t[n]=new Set([...r,...e[n]])}else if((t=>t&&"object"==typeof t&&!Array.isArray(t))(e[n])){let r=t[n]||{};t[n]=Object.assign({},e[n],r)}else Kn(e[n])?t[n]=e[n].concat(t[n]||[]):void 0===t[n]&&(t[n]=e[n])}),t))(e.props,t.props)}),this}depth(){rr(this.json);let t=Zn(this.json),e=t.length>1?1:0;return t.forEach(t=>{if(0===t._cache.parents.length)return;let n=t._cache.parents.length+1;n>e&&(e=n)}),e}out(t){return rr(this.json),nr(this.json,t)}debug(){return rr(this.json),nr(this.json,"debug"),this}}const ir=function(t){let e=Xn(t);return new g(e)};ir.prototype.plugin=function(t){t(this)};var sr={Noun:"blue",Verb:"green",Negative:"green",Date:"red",Value:"red",Adjective:"magenta",Preposition:"cyan",Conjunction:"cyan",Determiner:"cyan",Adverb:"cyan"};const lr=function(t){if(sr.hasOwnProperty(t.id))return sr[t.id];if(sr.hasOwnProperty(t.is))return sr[t.is];let e=t._cache.parents.find(t=>sr[t]);return sr[e]};var ar=function(t){const e={};return t.forEach(t=>{let{not:n,also:r,is:o,novel:i}=t.props,s=t._cache.parents;r&&(s=s.concat(r)),e[t.id]={is:o,not:n,novel:i,also:r,parents:s,children:t._cache.children,color:lr(t)}}),Object.keys(e).forEach(t=>{let n=new Set(e[t].not);e[t].not.forEach(t=>{e[t]&&e[t].children.forEach(t=>n.add(t))}),e[t].not=Array.from(n)}),e};const cr=function(t){return t?"string"==typeof t?[t]:t:[]};var ur=function(t,e){return t=function(t,e){return Object.keys(t).forEach(n=>{t[n].isA&&(t[n].is=t[n].isA),t[n].notA&&(t[n].not=t[n].notA),t[n].is&&"string"==typeof t[n].is&&(e.hasOwnProperty(t[n].is)||t.hasOwnProperty(t[n].is)||(t[t[n].is]={})),t[n].not&&"string"==typeof t[n].not&&!t.hasOwnProperty(t[n].not)&&(e.hasOwnProperty(t[n].not)||t.hasOwnProperty(t[n].not)||(t[t[n].not]={}))}),t}(t,e),Object.keys(t).forEach(e=>{t[e].children=cr(t[e].children),t[e].not=cr(t[e].not)}),Object.keys(t).forEach(e=>{(t[e].not||[]).forEach(n=>{t[n]&&t[n].not&&t[n].not.push(e)})}),t};var hr={one:{setTag:Wn,unTag:In,addTags:function(t,e){Object.keys(e).length>0&&(t=function(t){return Object.keys(t).forEach(e=>{t[e]=Object.assign({},t[e]),t[e].novel=!0}),t}(t)),t=ur(t,e);const n=function(t){const e=Object.keys(t).map(e=>{let n=t[e];const r={not:new Set(n.not),also:n.also,is:n.is,novel:n.novel};return{id:e,parent:n.is,props:r,children:[]}});return ir(e).cache().fillDown().out("array")}(Object.assign({},e,t));return ar(n)}}};const fr=function(t){return"[object Array]"===Object.prototype.toString.call(t)};var pr={tag:function(t,e="",n){if(!this.found||!t)return this;let r=this.termList();if(0===r.length)return this;const{methods:o,verbose:i,world:s}=this;return!0===i&&console.log(" +  ",t,e||""),fr(t)?t.forEach(t=>o.one.setTag(r,t,s,n)):o.one.setTag(r,t,s,n),this.uncache(),this},tagSafe:function(t,e=""){return this.tag(t,e,!0)},unTag:function(t,e){if(!this.found||!t)return this;let n=this.termList();if(0===n.length)return this;const{methods:r,verbose:o,model:i}=this;!0===o&&console.log(" -  ",t,e||"");let s=i.one.tagSet;return fr(t)?t.forEach(t=>r.one.unTag(n,t,s)):r.one.unTag(n,t,s),this.uncache(),this},canBe:function(t){let e=this.model.one.tagSet;if(!e.hasOwnProperty(t))return this;let n=e[t].not||[],r=[];this.document.forEach((t,e)=>{t.forEach((t,o)=>{n.find(e=>t.tags.has(e))&&r.push([e,o,o+1])})});let o=this.update(r);return this.difference(o)}};var dr=function(t){Object.assign(t.prototype,pr)};var gr={addTags:function(t){const{model:e,methods:n}=this.world(),r=e.one.tagSet;let o=(0,n.one.addTags)(t,r);return e.one.tagSet=o,this}};const mr=new Set(["Auxiliary","Possessive"]);var wr={model:{one:{tagSet:{}}},compute:{tagRank:function(t){const{document:e,world:n}=t,r=n.model.one.tagSet;e.forEach(t=>{t.forEach(t=>{let e=Array.from(t.tags);t.tagRank=function(t,e){return t.sort((t,n)=>{if(mr.has(t)||!e.hasOwnProperty(n))return 1;if(mr.has(n)||!e.hasOwnProperty(t))return-1;let r=e[t].children||[],o=r.length;return r=e[n].children||[],o-r.length})}(e,r)})})}},methods:hr,api:dr,lib:gr};const yr=/(\S.+?[.!?\u203D\u2E18\u203C\u2047-\u2049])(?=\s|$)/g,vr=/((?:\r?\n|\r)+)/;var br=function(t){let e=[],n=t.split(vr);for(let t=0;t<n.length;t++){let r=n[t].split(yr);for(let t=0;t<r.length;t++)e.push(r[t])}return e};const xr=/[ .][A-Z]\.? *$/i,jr=/(?:\u2026|\.{2,}) *$/,Er=/\p{L}/u;var Or=function(t,e){if(!1===Er.test(t))return!1;if(!0===xr.test(t))return!1;if(!0===jr.test(t))return!1;let n=t.replace(/[.!?\u203D\u2E18\u203C\u2047-\u2049] *$/,"").split(" "),r=n[n.length-1].toLowerCase();return!0!==e.hasOwnProperty(r)};const kr=/\S/,Pr=/^\s+/,_r=/[a-z0-9\u00C0-\u00FF\u00a9\u00ae\u2000-\u3300\ud000-\udfff]/i;var Sr=function(t,e){let n=e.one.abbreviations||new Set;t=t||"";let r=[],o=[];if(!(t=String(t))||"string"!=typeof t||!1===kr.test(t))return r;t=t.replace("Â "," ");let i=br(t);for(let t=0;t<i.length;t++){let e=i[t];if(void 0!==e&&""!==e){if(!1===kr.test(e)||!1===_r.test(e)){if(o[o.length-1]){o[o.length-1]+=e;continue}if(i[t+1]){i[t+1]=e+i[t+1];continue}}o.push(e)}}for(let t=0;t<o.length;t++){let e=o[t];o[t+1]&&!1===Or(e,n,_r)?o[t+1]=e+(o[t+1]||""):e&&e.length>0&&(r.push(e),o[t]="")}if(0===r.length)return[t];for(let t=1;t<r.length;t+=1){let e=r[t].match(Pr);null!==e&&(r[t-1]+=e[0],r[t]=r[t].replace(Pr,""))}return r};const Ar=function(t,e){let n=t.split(/[-â€“â€”]/);if(n.length<=1)return!1;const{prefixes:r,suffixes:o}=e.one;if(r.hasOwnProperty(n[0]))return!1;if(n[1]=n[1].trim().replace(/[.?!]$/,""),o.hasOwnProperty(n[1]))return!1;if(!0===/^([a-z\u00C0-\u00FF`"'/]+)[-â€“â€”]([a-z0-9\u00C0-\u00FF].*)/i.test(t))return!0;return!0===/^([0-9]{1,4})[-â€“â€”]([a-z\u00C0-\u00FF`"'/-]+$)/i.test(t)},$r=function(t){let e=[];const n=t.split(/[-â€“â€”]/);let r="-",o=t.match(/[-â€“â€”]/);o&&o[0]&&(r=o);for(let t=0;t<n.length;t++)t===n.length-1?e.push(n[t]):e.push(n[t]+r);return e};var Tr=function(t){const e=/^[0-9]{1,4}(:[0-9][0-9])?([a-z]{1,2})? ?[-â€“â€”] ?$/,n=/^[0-9]{1,4}([a-z]{1,2})? ?$/;for(let r=0;r<t.length-1;r+=1)t[r+1]&&e.test(t[r])&&n.test(t[r+1])&&(t[r]=t[r]+t[r+1],t[r+1]=null);return t};const Cr=/\p{L} ?\/ ?\p{L}+$/u;var zr=function(t){for(let e=1;e<t.length-1;e++)Cr.test(t[e])&&(t[e-1]+=t[e]+t[e+1],t[e]=null,t[e+1]=null);return t};const Nr=/\S/,Fr=/^[!?.]+$/,Lr=/(\S+)/;let Vr=[".","?","!",":",";","-","â€“","â€”","--","...","(",")","[","]",'"',"'","`"];Vr=Vr.reduce((t,e)=>(t[e]=!0,t),{});const qr=/^[ \n\t.[\](){}âŸ¨âŸ©:,ØŒã€â€’â€“â€”â€•â€¦!â€¹â€ºÂ«Â»â€\-?â€˜â€™;/â„Â·&*â€¢^â€ â€¡Â°Â¡Â¿â€»â„–Ã·Ã—ÂºÂª%â€°+âˆ’=â€±Â¶â€²â€³â€´Â§~|â€–Â¦Â©â„—Â®â„ â„¢Â¤â‚³à¸¿\u0022\uFF02\u0027\u201C\u201F\u201B\u201E\u2E42\u201A\u2035\u2036\u2037\u301D\u0060\u301F]+/,Dr=/[ \n\t.'[\](){}âŸ¨âŸ©:,ØŒã€â€’â€“â€”â€•â€¦!â€¹â€ºÂ«Â»â€\-?â€˜â€™;/â„Â·&*@â€¢^â€ â€¡Â°Â¡Â¿â€»#â„–Ã·Ã—ÂºÂªâ€°+âˆ’=â€±Â¶â€²â€³â€´Â§~|â€–Â¦Â©â„—Â®â„ â„¢Â¤â‚³à¸¿\u0022\uFF02\u201D\u00B4\u301E]+$/,Gr=/['â€™]/,Br=/^[a-z]\.([a-z]\.)+/i,Mr=/^[-+.][0-9]/,Ur=/^'[0-9]{2}/;var Wr=function(t){let e=t,n="",r="";return""===(t=(t=t.replace(qr,e=>(n=e,"-"!==n&&"+"!==n&&"."!==n||!Mr.test(t)?"'"===n&&Ur.test(t)?(n="",e):"":(n="",e)))).replace(Dr,o=>(r=o,Gr.test(o)&&/[sn]['â€™]$/.test(e)&&!1===Gr.test(n)?(r=r.replace(Gr,""),"'"):!0===Br.test(t)?(r=r.replace(/\./,""),"."):"")))&&(e=e.replace(/ *$/,t=>(r=t||"","")),t=e,n=""),{str:t,pre:n,post:r}};var Ir=function(t){let e=t=(t=(t=t||"").toLowerCase()).trim();return t=(t=(t=t.replace(/[,;.!?]+$/,"")).replace(/\u2026/g,"...")).replace(/\u2013/g,"-"),!1===/^[:;]/.test(t)&&(t=(t=(t=t.replace(/\.{3,}$/g,"")).replace(/[",.!:;?)]+$/g,"")).replace(/^['"(]+/g,"")),""===(t=(t=t.replace(/[\u200B-\u200D\uFEFF]/g,"")).trim())&&(t=e),t=t.replace(/([0-9]),([0-9])/g,"$1$2")};const Qr=/([A-Z]\.)+[A-Z]?,?$/,Rr=/^[A-Z]\.,?$/,Hr=/[A-Z]{2,}('s|,)?$/,Zr=/([a-z]\.)+[a-z]\.?$/;var Kr=function(t){return function(t){return!0===Qr.test(t)||!0===Zr.test(t)||!0===Rr.test(t)||!0===Hr.test(t)}(t)&&(t=t.replace(/\./g,"")),t};var Jr=function(t,e){const n=e.methods.one.killUnicode;let r=t.text||"";r=Ir(r),r=n(r,e),r=Kr(r),t.normal=r};var Xr={one:{killUnicode:function(t,e){const n=e.model.one.unicode||{};let r=t.split("");return r.forEach((t,e)=>{n[t]&&(r[e]=n[t])}),r.join("")},tokenize:{splitSentences:Sr,splitTerms:function(t,e){let n=[],r=[];if("number"==typeof(t=t||"")&&(t=String(t)),function(t){return"[object Array]"===Object.prototype.toString.call(t)}(t))return t;const o=t.split(Lr);for(let t=0;t<o.length;t++)!0!==Ar(o[t],e)?r.push(o[t]):r=r.concat($r(o[t]));let i="";for(let t=0;t<r.length;t++){let e=r[t];!0===Nr.test(e)&&!1===Vr.hasOwnProperty(e)&&!1===Fr.test(e)?(n.length>0?(n[n.length-1]+=i,n.push(e)):n.push(i+e),i=""):i+=e}return i&&(0===n.length&&(n[0]=""),n[n.length-1]+=i),n=zr(n),n=Tr(n),n=n.filter(t=>t),n},splitWhitespace:t=>{let{str:e,pre:n,post:r}=Wr(t);return{text:e,pre:n,post:r,tags:new Set}},fromString:function(t,e){const{methods:n,model:r}=e,{splitSentences:o,splitTerms:i,splitWhitespace:s}=n.one.tokenize;return t=o(t=t||"",r).map(t=>{let n=i(t,r);return n=n.map(s),n.forEach(t=>{Jr(t,e)}),n})}}}};var Yr={"&":"and","@":"at","%":"percent",plz:"please",bein:"being"};let to={},eo={};[[["approx","apt","bc","cyn","eg","esp","est","etc","ex","exp","prob","pron","gal","min","pseud","fig","jd","lat","lng","vol","fm","def","misc","plz","ea","ps","sec","pt","pref","pl","pp","qt","fr","sq","nee","ss","tel","temp","vet","ver","fem","masc","eng","adj","vb","rb","inf","situ","vivo","vitro","wr"]],[["dl","ml","gal","ft","qt","pt","tbl","tsp","tbsp","km","dm","cm","mm","mi","td","hr","hrs","kg","hg","dg","cg","mg","Âµg","lb","oz","sq ft","hz","mps","mph","kmph","kb","mb","gb","tb","lx","lm","pa","fl oz","yb"],"Unit"],[["ad","al","arc","ba","bl","ca","cca","col","corp","ft","fy","ie","lit","ma","md","pd","tce"],"Noun"],[["adj","adm","adv","asst","atty","bldg","brig","capt","cmdr","comdr","cpl","det","dr","esq","gen","gov","hon","jr","llb","lt","maj","messrs","mister","mlle","mme","mr","mrs","ms","mstr","phd","prof","pvt","rep","reps","res","rev","sen","sens","sfc","sgt","sir","sr","supt","surg"],"Honorific"],[["jan","feb","mar","apr","jun","jul","aug","sep","sept","oct","nov","dec"],"Month"],[["dept","univ","assn","bros","inc","ltd","co"],"Organization"],[["rd","st","dist","mt","ave","blvd","cl","cres","hwy","ariz","cal","calif","colo","conn","fla","fl","ga","ida","ia","kan","kans","minn","neb","nebr","okla","penna","penn","pa","dak","tenn","tex","ut","vt","va","wis","wisc","wy","wyo","usafa","alta","ont","que","sask"],"Place"]].forEach(t=>{t[0].forEach(e=>{to[e]=!0,eo[e]="Abbreviation",void 0!==t[1]&&(eo[e]=[eo[e],t[1]])})});var no=["anti","bi","co","contra","counter","de","extra","infra","inter","intra","macro","micro","mid","mis","mono","multi","non","over","peri","post","pre","pro","proto","pseudo","re","semi","sub","supra","trans","tri","un","out"].reduce((t,e)=>(t[e]=!0,t),{});let ro={"!":"Â¡","?":"Â¿É",'"':'â€œâ€"ââž',"'":"â€˜â€›â›âœâ€™","-":"â€”â€“",a:"ÂªÃ€ÃÃ‚ÃƒÃ„Ã…Ã Ã¡Ã¢Ã£Ã¤Ã¥Ä€ÄÄ‚ÄƒÄ„Ä…ÇÇŽÇžÇŸÇ Ç¡ÇºÇ»È€ÈÈ‚ÈƒÈ¦È§ÈºÎ†Î‘Î”Î›Î¬Î±Î»ÐÐ°Ñ¦Ñ§ÓÓ‘Ó’Ó“Æ›Ã¦",b:"ÃŸÃ¾Æ€ÆÆ‚ÆƒÆ„Æ…ÉƒÎ’Î²ÏÏ¦Ð‘Ð’ÐªÐ¬Ð²ÑŠÑŒÑ¢Ñ£ÒŒÒ",c:"Â¢Â©Ã‡Ã§Ä†Ä‡ÄˆÄ‰ÄŠÄ‹ÄŒÄÆ†Æ‡ÆˆÈ»È¼Í»Í¼Ï²Ï¹Ï½Ï¾Ð¡ÑÑ”Ò€ÒÒªÒ«",d:"ÃÄŽÄÄÄ‘Æ‰ÆŠÈ¡Æ‹ÆŒ",e:"ÃˆÃ‰ÃŠÃ‹Ã¨Ã©ÃªÃ«Ä’Ä“Ä”Ä•Ä–Ä—Ä˜Ä™ÄšÄ›ÆÈ„È…È†È‡È¨È©É†É‡ÎˆÎ•ÎžÎ£Î­ÎµÎ¾ÏµÐ€ÐÐ•ÐµÑÑ‘Ò¼Ò½Ò¾Ò¿Ó–Ó—",f:"Æ‘Æ’ÏœÏÓºÓ»Ò’Ò“Å¿",g:"ÄœÄÄžÄŸÄ Ä¡Ä¢Ä£Æ“Ç¤Ç¥Ç¦Ç§Ç´Çµ",h:"Ä¤Ä¥Ä¦Ä§Æ•Ç¶ÈžÈŸÎ‰Î—Ð‚ÐŠÐ‹ÐÐ½Ñ’Ñ›Ò¢Ò£Ò¤Ò¥ÒºÒ»Ó‰ÓŠ",I:"ÃŒÃÃŽÃ",i:"Ã¬Ã­Ã®Ã¯Ä¨Ä©ÄªÄ«Ä¬Ä­Ä®Ä¯Ä°Ä±Æ–Æ—ÈˆÈ‰ÈŠÈ‹ÎŠÎÎªÎ¯Î¹ÏŠÐ†Ð‡Ñ–Ñ—",j:"Ä´ÄµÇ°È·ÉˆÉ‰Ï³ÐˆÑ˜",k:"Ä¶Ä·Ä¸Æ˜Æ™Ç¨Ç©ÎšÎºÐŒÐ–ÐšÐ¶ÐºÑœÒšÒ›ÒœÒÒžÒŸÒ Ò¡",l:"Ä¹ÄºÄ»Ä¼Ä½Ä¾Ä¿Å€ÅÅ‚ÆšÆªÇ€ÇÇÈ´È½Î™Ó€Ó",m:"ÎœÏºÏ»ÐœÐ¼ÓÓŽ",n:"Ã‘Ã±ÅƒÅ„Å…Å†Å‡ÅˆÅ‰ÅŠÅ‹ÆÆžÇ¸Ç¹È ÈµÎÎ Î®Î·ÏžÐÐ˜Ð™Ð›ÐŸÐ¸Ð¹Ð»Ð¿ÑÒŠÒ‹Ó…Ó†Ó¢Ó£Ó¤Ó¥Ï€",o:"Ã’Ã“Ã”Ã•Ã–Ã˜Ã°Ã²Ã³Ã´ÃµÃ¶Ã¸ÅŒÅÅŽÅÅÅ‘ÆŸÆ Æ¡Ç‘Ç’ÇªÇ«Ç¬Ç­Ç¾Ç¿ÈŒÈÈŽÈÈªÈ«È¬È­È®È¯È°È±ÎŒÎ˜ÎŸÎ¸Î¿ÏƒÏŒÏ•Ï˜Ï™Ï¬Ï´ÐžÐ¤Ð¾Ñ²Ñ³Ó¦Ó§Ó¨Ó©ÓªÓ«",p:"Æ¤Î¡ÏÏ·Ï¸Ï¼Ð Ñ€ÒŽÒÃž",q:"ÉŠÉ‹",r:"Å”Å•Å–Å—Å˜Å™Æ¦ÈÈ‘È’È“ÉŒÉÐƒÐ“Ð¯Ð³ÑÑ“ÒÒ‘",s:"ÅšÅ›ÅœÅÅžÅŸÅ Å¡Æ§Æ¨È˜È™È¿Ð…Ñ•",t:"Å¢Å£Å¤Å¥Å¦Å§Æ«Æ¬Æ­Æ®ÈšÈ›È¶È¾Î“Î¤Ï„Ï®Ð¢Ñ‚",u:"ÂµÃ™ÃšÃ›ÃœÃ¹ÃºÃ»Ã¼Å¨Å©ÅªÅ«Å¬Å­Å®Å¯Å°Å±Å²Å³Æ¯Æ°Æ±Æ²Ç“Ç”Ç•Ç–Ç—Ç˜Ç™ÇšÇ›ÇœÈ”È•È–È—É„Î°Î¼Ï…Ï‹Ï",v:"Î½Ñ´ÑµÑ¶Ñ·",w:"Å´ÅµÆœÏ‰ÏŽÏ–Ï¢Ï£Ð¨Ð©ÑˆÑ‰Ñ¡Ñ¿",x:"Ã—Î§Ï‡Ï—Ï°Ð¥Ñ…Ò²Ò³Ó¼Ó½Ó¾Ó¿",y:"ÃÃ½Ã¿Å¶Å·Å¸Æ³Æ´È²È³ÉŽÉÎŽÎ¥Î«Î³ÏˆÏ’Ï“Ï”ÐŽÐ£ÑƒÑ‡ÑžÑ°Ñ±Ò®Ò¯Ò°Ò±Ó®Ó¯Ó°Ó±Ó²Ó³",z:"Å¹ÅºÅ»Å¼Å½Å¾ÆµÆ¶È¤È¥É€Î–"},oo={};Object.keys(ro).forEach((function(t){ro[t].split("").forEach((function(e){oo[e]=t}))}));const io=/\//,so=/[a-z]\.[a-z]/i,lo=/[0-9]/;var ao=function(t,e){let n=t.normal||t.text;const r=e.model.one.aliases;if(r.hasOwnProperty(n)&&(t.alias=t.alias||[],t.alias.push(r[n])),io.test(n)&&!so.test(n)&&!lo.test(n)){let e=n.split(io);e.length<=2&&e.forEach(e=>{""!==(e=e.trim())&&(t.alias=t.alias||[],t.alias.push(e))})}return t};var co=function(t){let e=t.implicit||t.normal||t.text;e=e.replace(/['â€™]s$/,""),e=e.replace(/s['â€™]$/,"s"),e=e.replace(/([aeiou][ktrp])in'$/,"$1ing"),!0===/^(re|un)-?[^aeiou]./.test(e)&&(e=e.replace("-","")),e=e.replace(/^[#@]/,""),e!==t.normal&&(t.machine=e)};var uo=function(t){let e=0,n=0,r=t.document;for(let t=0;t<r.length;t+=1)for(let o=0;o<r[t].length;o+=1){let i=r[t][o];i.offset={index:n,start:e+i.pre.length,length:i.text.length},e+=i.pre.length+i.text.length+i.post.length,n+=1}};const ho=function(t,e){let n=t.docs;for(let r=0;r<n.length;r+=1)for(let o=0;o<n[r].length;o+=1)e(n[r][o],t.world)};var fo={compute:{alias:t=>ho(t,ao),machine:t=>ho(t,co),normal:t=>ho(t,Jr),freq:function(t){let e=t.docs,n={};for(let t=0;t<e.length;t+=1)for(let r=0;r<e[t].length;r+=1){let o=e[t][r],i=o.machine||o.normal;n[i]=n[i]||0,n[i]+=1}for(let t=0;t<e.length;t+=1)for(let r=0;r<e[t].length;r+=1){let o=e[t][r],i=o.machine||o.normal;o.freq=n[i]}},offset:uo,index:function(t){let e=t.document;for(let t=0;t<e.length;t+=1)for(let n=0;n<e[t].length;n+=1)e[t][n].index=[t,n]},wordCount:function(t){let e=0,n=t.docs;for(let t=0;t<n.length;t+=1)for(let r=0;r<n[t].length;r+=1)""!==n[t][r].normal&&(e+=1,n[t][r].wordCount=e)}},methods:Xr,model:{one:{aliases:Yr,abbreviations:to,prefixes:no,suffixes:{like:!0,ish:!0,less:!0,able:!0,elect:!0,type:!0,designate:!0},lexicon:eo,unicode:oo}},hooks:["alias","machine","index","id"]};const po=function(){const t=this.docs;if(0===t.length)return this;let e=t[t.length-1]||[],n=e[e.length-1];return!0===n.typeahead&&n.machine&&(n.text=n.machine,n.normal=n.machine),this};var go=function(t,e,n){let r={},o=[],i=n.prefixes||{};return t.forEach(t=>{let s=(t=t.toLowerCase().trim()).length;e.max&&s>e.max&&(s=e.max);for(let l=e.min;l<s;l+=1){let s=t.substring(0,l);e.safe&&n.model.one.lexicon.hasOwnProperty(s)||(!0!==i.hasOwnProperty(s)&&!0!==r.hasOwnProperty(s)?r[s]=t:o.push(s))}}),r=Object.assign({},i,r),o.forEach(t=>{delete r[t]}),r};const mo={safe:!0,min:3};var wo={typeahead:function(t=[],e={}){let n=this.model();var r;e=Object.assign({},mo,e),r=t,"[object Object]"===Object.prototype.toString.call(r)&&(Object.assign(n.one.lexicon,t),t=Object.keys(t));let o=go(t,e,this.world());return Object.keys(o).forEach(t=>{n.one.typeahead.hasOwnProperty(t)?delete n.one.typeahead[t]:n.one.typeahead[t]=o[t]}),this}};var yo={model:{one:{typeahead:{}}},api:function(t){t.prototype.autoFill=po},lib:wo,compute:{typeahead:function(t){const e=t.model.one.typeahead,n=t.docs;if(0===n.length||0===Object.keys(e).length)return;let r=n[n.length-1]||[],o=r[r.length-1];if(!o.post&&e.hasOwnProperty(o.normal)){let n=e[o.normal];o.implicit=n,o.machine=n,o.typeahead=!0,t.compute.preTagger&&t.last().unTag("*").compute(["lexicon","preTagger"])}}},hooks:["typeahead"]};d.extend(R),d.extend(wn),d.extend(Be),d.extend(Sn),d.extend(wr),d.plugin(xt),d.extend(fo),d.plugin(w),d.extend(zt),d.extend(yo),d.extend(Pt),d.extend(Dn);export{d as default};
